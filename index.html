<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ì„ ëŒ€ì¹­/ì ëŒ€ì¹­ë„í˜• ì™„ì „ ì •ë³µ</title>
    <meta property="og:title" content="ì„ ëŒ€ì¹­/ì ëŒ€ì¹­ë„í˜• ì™„ì „ ì •ë³µ">
    <meta property="og:description" content="ì„ ëŒ€ì¹­, ì ëŒ€ì¹­ë„í˜• ë¬¸ì œë¥¼ ì—°ìŠµí•´ë³´ì„¸ìš”!">
    <meta property="og:image" content="https://3arch2nd.github.io/symmetry/thumb.png">
    <meta property="og:url" content="https://3arch2nd.github.io/symmetry/">
    <meta property="og:type" content="website">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&display=swap" rel="stylesheet">
    <style>
/* ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
body {
    font-family: 'Gowun Dodum', sans-serif;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    margin: 0;
    background-color: #f4f7f6;
    color: #333;
    text-align: center;
}
.container {
    position: relative;
    background-color: white;
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
    width: 90%;
    max-width: 760px;
    text-align: center;
    margin: 20px auto;
    box-sizing: border-box;
}
h1 {
    color: #4b8134;
    margin-bottom: 20px;
    font-size: 2em;
}
h2 {
    margin-bottom: 5px;
}
small {
    display: block;
    font-size: 18px;
    color: #6c757d;
    margin-bottom: 20px;
    line-height: 1.5;
}
button {
    font-family: 'Gowun Dodum', sans-serif;
    padding: 10px 20px;
    margin: 5px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-size: 16px;
    transition: background-color 0.3s, transform 0.1s;
}
button:hover {
    transform: translateY(-1px);
}
.primary-btn {
    background-color: #a0c179;
    color: white;
}
.primary-btn:hover {
    background-color: #8cb24b;
}
.secondary-btn {
    background-color: #e9e9e9;
    color: #333;
    border: none;
}
.secondary-btn:hover {
    background-color: #d9d9d9;
}
#clear-canvas-btn {
    background-color: #e06666;
    color: white;
}
#clear-canvas-btn:hover {
    background-color: #cc4125;
}
.mode-btn-active {
    background-color: #ffc107;
    color: #333;
    font-weight: bold;
}
#mode-selection-page, #setup-page, #problem-page, #final-result-page {
    display: none;
}
#mode-selection-page {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 20px;
}
.mode-buttons {
    display: flex;
    gap: 15px;
    margin-top: 20px;
    width: 100%;
    justify-content: space-around;
}
.mode-buttons button {
    padding: 20px 30px;
    font-size: 20px;
    width: 100%;
    max-width: 250px;
}
#classic-mode-btn {
    background-color: #ffc107;
    color: #333;
    font-weight: bold;
}
#classic-mode-btn:hover {
    background-color: #fdb827;
}
#time-attack-mode-btn {
    background-color: #e06666;
    color: white;
    font-weight: bold;
}
#time-attack-mode-btn:hover {
    background-color: #cc4125;
}
.mode-option {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
    flex: 1;
}
.mode-description {
    font-size: 16px;
    color: #6c757d;
    line-height: 1.5;
}
#setup-page {
    display: flex;
    flex-direction: column;
    gap: 20px;
}
.setting-group {
    border: 1px solid #ddd;
    padding: 15px;
    border-radius: 8px;
    text-align: center;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    box-sizing: border-box;
    flex-grow: 1;
}
.option-buttons {
    display: flex;
    flex-direction: row;
    justify-content: center;
    gap: 5px;
    margin-top: 10px;
}
.option-buttons button {
    flex-grow: 1;
    padding: 10px 20px;
}
.option-buttons button.selected {
    background-color: #ffc107;
    color: #333;
    font-weight: bold;
}
.canvas-wrapper {
    position: relative;
    display: block;
    margin: 0 auto 20px auto;
    width: 100%;
    max-width: 400px;
    height: auto;
    aspect-ratio: 1 / 1;
    border: 2px solid #333;
    box-sizing: border-box;
}
#grid-canvas {
    background-color: white;
    cursor: crosshair;
    width: 100%;
    height: 100%;
    display: block;
    -webkit-tap-highlight-color: transparent;
}
.user-dot {
    width: 8px;
    height: 8px;
    background-color: #dc3545;
    border-radius: 50%;
    position: absolute;
    transform: translate(-50%, -50%);
    pointer-events: none;
    box-shadow: 0 0 3px rgba(0,0,0,0.5);
    z-index: 10;
}
.problem-dot, .line-dot {
    width: 8px;
    height: 8px;
    background-color: black;
    border-radius: 50%;
    position: absolute;
    transform: translate(-50%, -50%);
    pointer-events: none;
    box-shadow: 0 0 3px rgba(0,0,0,0.5);
    z-index: 10;
}
.selected-line-dot {
    width: 10px;
    height: 10px;
    background-color: #ff0000;
    border-radius: 50%;
    position: absolute;
    transform: translate(-50%, -50%);
    pointer-events: none;
    box-shadow: 0 0 5px rgba(255,0,0,0.8);
    z-index: 11;
}
.canvas-controls {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 10px;
    margin-bottom: 20px;
}
.correct, .incorrect {
    padding: 10px;
    border-radius: 8px;
    font-weight: bold;
    margin-top: 15px;
}
.correct { color: #28a745; }
.incorrect { color: #dc3545; }
#quantity-control, #time-control {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 15px;
}
#quantity-control button, #time-control button {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    padding: 0;
    margin: 0;
    font-size: 20px;
    font-weight: bold;
    line-height: 30px;
    background-color: #f0f0f0;
    border: 1px solid #ccc;
    color: #333;
}
#quantity-control button:hover, #time-control button:hover {
    background-color: #e0e0e0;
}
.quantity-display {
    display: inline-block;
    width: auto;
    min-width: 40px;
    height: auto;
    background-color: transparent;
    border-radius: 0;
    font-size: 24px;
    font-weight: bold;
    color: #333;
    box-shadow: none;
    vertical-align: baseline;
    margin: 0;
    text-align: center;
}
.footer {
    margin-top: 20px;
    font-size: 12px;
    color: #ccc;
    text-align: center;
}
.main-layout {
    display: flex;
    flex-direction: row;
    gap: 20px;
    width: 100%;
    max-width: 800px;
    align-items: stretch;
    flex-wrap: wrap;
}
.main-layout h3 {
    text-align: center;
}
.left-panel {
    flex: 2;
    display: flex;
    flex-direction: column;
    gap: 20px;
}
.right-panel {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 20px;
}
.settings-wrapper {
    position: relative;
    flex-grow: 1;
}
.right-panel .setting-group, .left-panel .setting-group {
    flex-grow: 1;
}
#start-quiz-btn {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    font-size: 20px;
    font-weight: bold;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 0;
    flex-shrink: 0;
}
.setting-group.start-btn-container {
    border: none;
    background-color: transparent;
    padding: 0;
}
#settings-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.6);
    color: white;
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
    border-radius: 8px;
    z-index: 10;
    padding: 10px;
    box-sizing: border-box;
    font-size: 1.1em;
    font-weight: bold;
    line-height: 1.5;
}
.problem-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
}
.home-button {
    background-color: #e9e9e9;
    color: #333;
    border-radius: 8px;
    padding: 8px 12px;
    font-size: 14px;
    display: flex;
    align-items: center;
    gap: 5px;
    cursor: pointer;
    text-decoration: none;
    transition: background-color 0.3s;
}
.home-button:hover {
    background-color: #d9d9d9;
}
#problem-number {
    flex-grow: 1;
    text-align: center;
    margin: 0;
}
#timer-display {
    width: 120px;
    font-size: 1.2em;
    font-weight: bold;
    text-align: right;
    padding-right: 10px;
    color: #333;
    display: none;
}
#problem-counter-display {
    width: 120px;
    font-size: 1em;
    font-weight: bold;
    text-align: right;
    padding-right: 10px;
    color: #888;
    display: none;
}
#timer-display.time-warning {
    color: #dc3545;
    animation: pulse 1s infinite;
}
@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}
.problem-footer {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    margin-top: 20px;
}
#check-answer-btn {
    position: relative;
    overflow: hidden;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    background-color: white;
    color: black;
    border: 2px solid #999;
}
#check-answer-btn:hover {
    background-color: #f0f0f0;
}
#check-answer-btn, #next-problem-btn {
    min-width: 180px;
}
#next-problem-btn {
    border: 2px solid transparent;
}
#check-answer-btn .progress-bar {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: #a0c179;
    transform: translateX(-100%);
}
#check-answer-btn .button-text {
    position: relative;
    z-index: 1;
}
#check-answer-container {
    display: flex;
    flex-direction: column;
    align-items: center;
}
.check-answer-guide {
    font-size: 0.8em;
    color: #888;
    margin-top: 8px;
    transition: color 0.3s ease;
}
.popup-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 100;
}
.popup-box {
    background-color: white;
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    position: relative;
    width: 80%;
    max-width: 450px;
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
}
.popup-box .close-btn {
    position: absolute;
    top: 10px;
    right: 15px;
    font-size: 28px;
    font-weight: bold;
    color: #333;
    cursor: pointer;
    background: none;
    border: none;
    padding: 0;
}
.popup-box .close-btn:hover { color: #6c757d; }
.result-popup #popup-main-message {
    font-size: 1.2em;
    font-weight: bold;
    margin-bottom: 0;
    line-height: 1.5;
}
.result-popup #popup-detail-message { display: none; }
.result-popup #popup-next-btn { margin-top: 20px; }
.final-result-layout {
    display: flex;
    flex-direction: row;
    justify-content: space-around;
    align-items: center;
    margin: 30px 0;
    gap: 20px;
}
.result-left, .result-right {
    flex: 1;
    padding: 20px;
}
.result-left {
    border-right: 1px solid #ddd;
}
.result-right p {
    font-size: 1.1em;
    margin: 15px 0;
}
#final-accuracy {
    font-size: 4em;
    font-weight: bold;
    color: #4b8134;
    margin-top: 10px;
}
.score-display {
    margin-top: 20px;
    font-size: 1.1em;
    font-weight: bold;
}
#final-score {
    font-size: 1.4em;
    font-weight: bold;
    color: #4b8134;
    display: inline-block;
    margin-left: 5px;
}
.result-buttons {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
    margin-top: 20px;
    flex-wrap: wrap;
}
#qr-code-btn {
    position: absolute;
    top: 15px;
    right: 15px;
    padding: 5px 10px;
    font-size: 14px;
    z-index: 20;
}
#qr-popup-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(255, 255, 255, 0.8);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 200;
}
.popup-qr {
    background-color: white;
    padding: 40px;
    border-radius: 12px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    position: relative;
    text-align: center;
}
.popup-qr img {
    max-width: 180px;
    height: auto;
}
.popup-qr p {
    margin-top: 15px;
    color: #666;
}
.close-btn-qr {
    position: absolute;
    top: 10px;
    right: 15px;
    font-size: 28px;
    font-weight: bold;
    color: #333;
    cursor: pointer;
    background: none;
    border: none;
    padding: 0;
}
#hof-popup-overlay { background-color: rgba(0, 0, 0, 0.2); }
.popup-hof { max-width: 700px; }
.hof-input-group { margin: 20px 0; }
.hof-input-group input {
    font-family: 'Gowun Dodum', sans-serif;
    font-size: 18px;
    padding: 8px;
    width: 80px;
    text-align: center;
    border: 1px solid #ccc;
    border-radius: 4px;
    margin-right: 10px;
    text-transform: uppercase;
}
.hof-columns {
    display: flex;
    gap: 20px;
    width: 100%;
}
.hof-column {
    flex: 1;
}
.hof-column h3 {
    margin-top: 0;
}
.hof-table-container { max-height: 300px; overflow-y: auto; margin-top: 20px;}
#hof-table-classic, #hof-table-timeattack { width: 100%; border-collapse: collapse; }
#hof-table-classic th, #hof-table-classic td,
#hof-table-timeattack th, #hof-table-timeattack td { padding: 8px; border-bottom: 1px solid #eee; }
#hof-table-classic th, #hof-table-timeattack th { background-color: #f8f9fa; }
.confirm-clear-popup p {
    font-size: 1.1em;
    margin-bottom: 25px;
    line-height: 1.6;
}
.confirm-buttons {
    display: flex;
    justify-content: center;
    gap: 15px;
    width: 100%;
}
.confirm-buttons button {
    padding: 10px 30px;
    font-weight: bold;
}
#confirm-clear-yes-btn {
    background-color: #e06666;
    color: white;
}
#confirm-clear-yes-btn:hover {
    background-color: #cc4125;
}
.mobile-title, .mobile-home { display: none; }
@media (max-width: 768px) {
    .main-layout { flex-direction: column; }
    .left-panel {
        flex-direction: row;
        gap: 10px;
        margin-top: 0;
    }
    .right-panel {
        width: 100%;
        margin-top: 20px;
    }
    .option-buttons { flex-direction: column; }
    .problem-footer { justify-content: center; }
    .final-result-layout { flex-direction: column; }
    .result-left { border-right: none; border-bottom: 1px solid #ddd; width: 100%; }
    .hof-columns { flex-direction: column; }
}
@media (max-width: 480px) {
    .container {
        padding: 15px;
    }
    h1 { font-size: 1.6em; }
    h2 { font-size: 1.2em; }
    small { font-size: 16px; line-height: 1.4; }
    #mode-selection-page h1,
    #setup-page h1 {
        padding-top: 30px;
        margin-bottom: 10px;
    }
    #mode-selection-page {
        gap: 10px;
    }
    #mode-selection-page h2 {
        margin-bottom: 10px;
    }
    .mode-buttons {
        margin-top: 10px;
    }
    .mode-buttons button {
        padding: 15px 10px;
        font-size: 1.3em;
        line-height: 1.3;
    }
    .mode-buttons button span {
        display: block;
    }
    .mode-description {
        font-size: 14px;
    }
    .desktop-title { display: none; }
    .mobile-title { display: inline; }
    .desktop-home { display: none; }
    .mobile-home { display: inline; }
    .home-button { padding: 8px 10px; }
    #back-to-mode-select-btn {
        top: 10px !important;
        left: 10px !important;
    }
}
</style>
</head>
<body>

<div class="container">
    <button id="qr-code-btn" class="secondary-btn">QR ì½”ë“œ</button>
    
    <div id="mode-selection-page">
        <h1>
            <span class="desktop-title">ì„ ëŒ€ì¹­/ì ëŒ€ì¹­ë„í˜• ì™„ì „ ì •ë³µ</span>
            <span class="mobile-title">ì„ ëŒ€ì¹­/ì ëŒ€ì¹­ë„í˜•<br>ì™„ì „ ì •ë³µ</span>
        </h1>
        <h2>ëª¨ë“œë¥¼ ì„ íƒí•˜ì„¸ìš”.</h2>
        <div class="mode-buttons">
            <div class="mode-option">
                <button id="classic-mode-btn">ğŸ“ í´ë˜ì‹ <span>ëª¨ë“œ</span></button>
                <small class="mode-description">
                    ë¬´ì‘ìœ„ë¡œ ìƒì„±ë˜ëŠ” ë¬¸ì œë¥¼<br>ì›í•˜ëŠ” ë§Œí¼ ì—°ìŠµí•˜ì„¸ìš”!
                </small>
            </div>
            <div class="mode-option">
                <button id="time-attack-mode-btn">â±ï¸ íƒ€ì„ì–´íƒ <span>ëª¨ë“œ</span></button>
                <small class="mode-description">
                    ì •í•´ì§„ ì‹œê°„ ë™ì•ˆ<br>ë¹ ë¥´ê³  ì •í™•í•˜ê²Œ!
                </small>
            </div>
        </div>
    </div>
    
    <div id="setup-page">
        <button id="back-to-mode-select-btn" class="home-button" style="position: absolute; top: 20px; left: 20px;">ëª¨ë“œ ì„ íƒìœ¼ë¡œ</button>
        <h1>
            <span class="desktop-title">ì„ ëŒ€ì¹­/ì ëŒ€ì¹­ë„í˜• ì™„ì „ ì •ë³µ</span>
            <span class="mobile-title">ì„ ëŒ€ì¹­/ì ëŒ€ì¹­ë„í˜•<br>ì™„ì „ ì •ë³µ</span>
        </h1>
        <h2 style="text-align: center;">ë¬¸ì œ ìœ í˜• ë° ì„¤ì •</h2>

        <div class="main-layout">
            <div class="left-panel">
                <div class="setting-group">
                    <h3>ë¬¸ì œ ìœ í˜• ì„ íƒ</h3>
                    <div id="type-select" class="option-buttons">
                        <button data-type="line" class="selected">ì„ ëŒ€ì¹­ë„í˜•</button>
                        <button data-type="point">ì ëŒ€ì¹­ë„í˜•</button>
                        <button data-type="both">ë‘˜ ë‹¤ í• ë˜ìš”</button>
                    </div>
                </div>
                <div class="setting-group">
                    <h3>ë‚œì´ë„ ì„ íƒ</h3>
                    <div id="difficulty-select" class="option-buttons">
                        <button data-difficulty="practice">ì—°ìŠµ</button>
                        <button data-difficulty="1" class="selected">â˜…</button>
                        <button data-difficulty="2">â˜…â˜…</button>
                    </div>
                </div>
            </div>
            <div class="right-panel">
                    <div class="settings-wrapper">
                        <div id="classic-settings">
                            <div class="setting-group">
                                <h3>ë¬¸ì œ ê°œìˆ˜ ì„¤ì •</h3>
                                <small style="margin-bottom: 10px;">(ìµœì†Œ 5, ìµœëŒ€ 50ë¬¸ì œ)</small>
                                <div id="quantity-control">
                                    <button id="quantity-minus">-</button>
                                    <span id="problem-quantity" class="quantity-display">5</span>
                                    <button id="quantity-plus">+</button>
                                </div>
                            </div>
                        </div>
                        <div id="time-attack-settings" style="display: none;">
                            <div class="setting-group">
                                <h3>ë„ì „ ì‹œê°„ ì„¤ì •</h3>
                                <div id="time-control" style="margin-top: 10px;">
                                    <button id="time-minus">&lt;</button>
                                    <span id="time-limit-display" class="quantity-display">3ë¶„</span>
                                    <button id="time-plus">&gt;</button>
                                </div>
                            </div>
                        </div>
                        <div id="settings-overlay" style="display: none;">
                            <p id="overlay-message"></p>
                        </div>
                    </div>
                    <div class="setting-group start-btn-container">
                        <button id="start-quiz-btn" class="primary-btn">ì‹œì‘!</button>
                    </div>
                </div>
            </div>
    </div>
    
    <div id="problem-page">
        <div class="problem-header">
            <button class="home-button">
                <span class="desktop-home">ğŸ  ì²« í˜ì´ì§€ë¡œ</span>
                <span class="mobile-home">ğŸ </span>
            </button>
            <h2 id="problem-number">1ë²ˆì§¸ ë¬¸ì œ</h2>
            <div id="timer-display"></div>
            <div id="problem-counter-display"></div>
        </div>
        <p id="problem-instruction">ì•„ë˜ ë„í˜•ì€ ì„ ëŒ€ì¹­ë„í˜•ì…ë‹ˆë‹¤. ë‚˜ë¨¸ì§€ ë¶€ë¶„ì„ ì™„ì„±í•´ ì£¼ì„¸ìš”.</p>
        
        <div class="canvas-wrapper">
            <canvas id="grid-canvas" width="400" height="400"></canvas>
        </div>

        <div class="canvas-controls">
            <button id="mode-vertex" class="secondary-btn mode-btn-active" onclick="setCanvasMode('vertex')">1ë‹¨ê³„: ê¼­ì§“ì </button>
            <button id="mode-line" class="secondary-btn" onclick="setCanvasMode('line')" disabled>2ë‹¨ê³„: ì„ ë¶„</button>
            <button id="clear-canvas-btn" class="secondary-btn">ëª¨ë‘ ì§€ìš°ê¸°</button>
        </div>
        
        <div class="problem-footer">
            <div id="check-answer-container">
                <button id="check-answer-btn" class="primary-btn">
                    <span class="progress-bar"></span>
                    <span class="button-text">ì •ë‹µ í™•ì¸í•˜ê¸°</span>
                </button>
                <button id="next-problem-btn" class="primary-btn" style="display: none;">ë‹¤ìŒ ë¬¸ì œ ë„ì „í•˜ê¸°</button>
                <small class="check-answer-guide">ê¾¹ ëˆ„ë¥´ê³  ìˆìœ¼ë©´ ì±„ì ë©ë‹ˆë‹¤!</small>
            </div>
        </div>
    </div>

    <div id="final-result-page">
        <h2 id="final-result-title">í•™ìŠµ ì™„ë£Œ</h2>
        <div class="final-result-layout">
            <div class="result-left">
                <p>ë‚˜ì˜ ì •í™•ë„</p>
                <div id="final-accuracy">0%</div>
            </div>
            <div class="result-right">
                <p>í•œ ë²ˆì— ë§ì¶˜ ë¬¸ì œ: <span id="correct-count">0</span>ê°œ</p>
                <p>ë‹¤ì‹œ ë„ì „í•´ ë§ì¶˜ ë¬¸ì œ: <span id="retried-count">0</span>ê°œ</p>
                <p id="time-attack-avg-time" style="display: none;">ë¬¸ì œë‹¹ í‰ê·  ì†ë„: <span id="avg-time-display">0</span>ì´ˆ</p>
                <p class="score-display">ìµœì¢… ì ìˆ˜: <span id="final-score">0</span>ì </p>
            </div>
        </div>
        <div class="result-buttons">
            <button id="restart-btn" class="primary-btn">ìƒˆë¡œìš´ í•™ìŠµ ì‹œì‘í•˜ê¸°</button>
            <button id="show-hof-btn" class="secondary-btn">ëª…ì˜ˆì˜ ì „ë‹¹ ë“±ë¡í•˜ê¸°</button>
        </div>
    </div>
</div>
<div class="footer">
    Copyright Â© 2025 íœ´ë¥´ìŒ¤. All rights reserved.
</div>

<div id="result-popup-overlay" class="popup-overlay" style="display: none;">
    <div class="result-popup popup-box">
        <button class="close-btn" onclick="closePopup()">&times;</button>
        <div class="popup-content">
            <p id="popup-main-message"></p>
            <p id="popup-detail-message"></p>
            <button id="popup-next-btn" class="primary-btn" onclick="nextProblem()">ë‹¤ìŒ ë¬¸ì œ ë„ì „í•˜ê¸°</button>
        </div>
    </div>
</div>

<div id="qr-popup-overlay" class="popup-overlay" style="display: none;">
    <div class="popup-qr popup-box">
        <button class="close-btn" onclick="closeQrPopup()">&times;</button>
        <img src="https://i.imgur.com/XT0OsoI.png" alt="QR Code">
    </div>
</div>

<div id="hof-popup-overlay" class="popup-overlay" style="display: none;">
    <div class="popup-hof popup-box">
        <button class="close-btn" onclick="closeHofPopup()">&times;</button>
        <h3>ğŸ†ëª…ì˜ˆì˜ ì „ë‹¹ğŸ†</h3>
        <small id="hof-reset-message" style="display: none; color: #888; margin-top: -10px; margin-bottom: 10px;">
            ìˆœìœ„ëŠ” ìì •ë§ˆë‹¤ ì´ˆê¸°í™”ë©ë‹ˆë‹¤.
        </small>
        <div class="hof-input-group">
            <input type="text" id="hof-initial" placeholder="AAA" maxlength="3" oninput="this.value = this.value.toUpperCase().replace(/[^A-Z]/g, '')">
            <button id="hof-submit-btn" class="primary-btn">ë“±ë¡</button>
        </div>
        <div id="hof-message"></div>
        <div class="hof-columns">
            <div class="hof-column">
                <h3>ğŸ“ í´ë˜ì‹ ëª¨ë“œ</h3>
                <div class="hof-table-container">
                    <table id="hof-table-classic">
                        <thead>
                            <tr>
                                <th>ìˆœìœ„</th>
                                <th>ì´ë‹ˆì…œ</th>
                                <th>ì ìˆ˜</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="hof-column">
                <h3>â±ï¸ íƒ€ì„ì–´íƒ ëª¨ë“œ</h3>
                <div class="hof-table-container">
                    <table id="hof-table-timeattack">
                        <thead>
                            <tr>
                                <th>ìˆœìœ„</th>
                                <th>ì´ë‹ˆì…œ</th>
                                <th>ì ìˆ˜</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="confirm-clear-popup-overlay" class="popup-overlay" style="display: none; background-color: rgba(255, 255, 255, 0.8);">
    <div class="popup-box confirm-clear-popup">
        <p>í‘œì‹œí•œ ì ê³¼ ì„ ë¶„ì„ ëª¨ë‘ ì§€ì›ë‹ˆë‹¤. <br> ê³„ì†í• ê¹Œìš”?</p>
        <div class="confirm-buttons">
            <button id="confirm-clear-yes-btn">ë„¤</button>
            <button id="confirm-clear-no-btn" class="secondary-btn">ì•„ë‹ˆìš”</button>
        </div>
    </div>
</div>

<script>
    const webAppUrl = 'https://patient-thunder-7347.bbglara.workers.dev/';
    const blockedWords = ['SEX', 'FUK', 'ASS', 'FUX', 'WTF']; 
const _0x4dc7fe=_0x5564;(function(_0x396cc1,_0x2ba3e3){const _0x507405=_0x5564,_0x595265=_0x396cc1();while(!![]){try{const _0x12eb84=-parseInt(_0x507405(0x1e2))/0x1*(parseInt(_0x507405(0x1a7))/0x2)+parseInt(_0x507405(0x177))/0x3*(parseInt(_0x507405(0x1ba))/0x4)+-parseInt(_0x507405(0x163))/0x5+-parseInt(_0x507405(0x23e))/0x6*(-parseInt(_0x507405(0x16d))/0x7)+parseInt(_0x507405(0x1bf))/0x8+parseInt(_0x507405(0x18f))/0x9+parseInt(_0x507405(0x22d))/0xa*(-parseInt(_0x507405(0x1c2))/0xb);if(_0x12eb84===_0x2ba3e3)break;else _0x595265['push'](_0x595265['shift']());}catch(_0x599044){_0x595265['push'](_0x595265['shift']());}}}(_0xb6fd,0x21ef6));const timeOptions=[0x3,0x5,0x7];let selectedType='line',totalProblems=0x5,currentProblem=0x0,canvasMode=_0x4dc7fe(0x19d),score={'results':[]},currentProblemAttempts=0x0,selectedDifficulty='1',finalAccuracyValue=0x0,finalScoreValue=0x0,hasSubmittedScore=![],isExitingIntentionally=![],gameMode=_0x4dc7fe(0x15e),timeLimitInMinutes=0x3,remainingTime=0x0,timerInterval=null;const canvas=document[_0x4dc7fe(0x244)](_0x4dc7fe(0x1c4)),ctx=canvas['getContext']('2d'),canvasWrapper=document[_0x4dc7fe(0x209)](_0x4dc7fe(0x1fa));let GRID_SIZE,GRID_COUNT,HALF_COUNT,CENTER_POINT,MIN_COORD,MAX_COORD;const COLLINEARITY_THRESHOLD=0x1,MIN_ANGLE_COSINE=Math[_0x4dc7fe(0x249)](0x1e*Math['PI']/0xb4),MAX_ANGLE_COSINE=Math[_0x4dc7fe(0x249)](0x96*Math['PI']/0xb4),MIN_SLOPE_DIFF=0x2,MIN_DIST=0x2;let problemVertices=[],problemLines=[],userVertices=[],userLines=[],tempLineStart=null,hoveredLine=null,problemList=[];function setupGrid(){const _0x2e15dc=_0x4dc7fe;GRID_COUNT=0x10,MIN_COORD=0x2,MAX_COORD=0xe,GRID_SIZE=canvas[_0x2e15dc(0x1e6)]/GRID_COUNT,HALF_COUNT=GRID_COUNT/0x2,CENTER_POINT={'x':HALF_COUNT,'y':HALF_COUNT};}const allPages=['mode-selection-page',_0x4dc7fe(0x1ef),_0x4dc7fe(0x1d6),'final-result-page'];function showPage(_0x35de63){const _0x2c9dc6=_0x4dc7fe;allPages[_0x2c9dc6(0x179)](_0x302118=>{const _0x39acfd=_0x2c9dc6,_0x3b1956=document[_0x39acfd(0x244)](_0x302118);if(_0x3b1956){const _0x5ff7ca=_0x302118===_0x39acfd(0x19b)||_0x302118==='setup-page'?'flex':_0x39acfd(0x234);_0x3b1956[_0x39acfd(0x1ab)]['display']=_0x302118===_0x35de63?_0x5ff7ca:'none';}});const _0x32b161=document[_0x2c9dc6(0x244)](_0x2c9dc6(0x1b0));_0x32b161&&(_0x32b161[_0x2c9dc6(0x1ab)][_0x2c9dc6(0x254)]=_0x35de63==='mode-selection-page'||_0x35de63===_0x2c9dc6(0x1ef)?_0x2c9dc6(0x234):_0x2c9dc6(0x20e));}function resetGame(){const _0x22bb8a=_0x4dc7fe;stopTimer(),clearGameState(),isExitingIntentionally=![],selectedType=_0x22bb8a(0x21f),totalProblems=0x5,currentProblem=0x0,canvasMode='vertex',score={'results':[]},currentProblemAttempts=0x0,selectedDifficulty='1',hasSubmittedScore=![],gameMode=_0x22bb8a(0x15e),timeLimitInMinutes=0x3,remainingTime=0x0,problemList=[],userVertices=[],userLines=[],document[_0x22bb8a(0x244)]('problem-quantity')[_0x22bb8a(0x229)]='5',document[_0x22bb8a(0x244)]('time-limit-display')[_0x22bb8a(0x229)]='3ë¶„',document[_0x22bb8a(0x244)]('timer-display')[_0x22bb8a(0x1ab)][_0x22bb8a(0x254)]=_0x22bb8a(0x20e),document['getElementById']('problem-counter-display')[_0x22bb8a(0x1ab)][_0x22bb8a(0x254)]=_0x22bb8a(0x20e),document[_0x22bb8a(0x184)]('#type-select\x20button')[_0x22bb8a(0x179)](_0x23cdc9=>_0x23cdc9[_0x22bb8a(0x1b5)][_0x22bb8a(0x1d1)](_0x22bb8a(0x222))),document[_0x22bb8a(0x209)](_0x22bb8a(0x1d7))[_0x22bb8a(0x1b5)][_0x22bb8a(0x15b)](_0x22bb8a(0x222)),document[_0x22bb8a(0x184)](_0x22bb8a(0x1f5))[_0x22bb8a(0x179)](_0x2a6ea2=>_0x2a6ea2[_0x22bb8a(0x1b5)]['remove'](_0x22bb8a(0x222))),document[_0x22bb8a(0x209)](_0x22bb8a(0x178))[_0x22bb8a(0x1b5)][_0x22bb8a(0x15b)]('selected'),setupGrid(),document[_0x22bb8a(0x244)]('classic-settings')['style'][_0x22bb8a(0x254)]=_0x22bb8a(0x234),document[_0x22bb8a(0x244)](_0x22bb8a(0x168))['style'][_0x22bb8a(0x254)]=_0x22bb8a(0x20e),updateSettingsOverlay();}function isSamePoint(_0x1b915a,_0x4bd844){if(!_0x1b915a||!_0x4bd844)return![];return _0x1b915a['x']===_0x4bd844['x']&&_0x1b915a['y']===_0x4bd844['y'];}function isSameLine(_0x22cc59,_0x18bb07){if(!_0x22cc59||!_0x18bb07)return![];const _0x45f521=_0x22cc59['p1'],_0x5715e3=_0x22cc59['p2'],_0x1dccb0=_0x18bb07['p1'],_0x22e780=_0x18bb07['p2'];return isSamePoint(_0x45f521,_0x1dccb0)&&isSamePoint(_0x5715e3,_0x22e780)||isSamePoint(_0x45f521,_0x22e780)&&isSamePoint(_0x5715e3,_0x1dccb0);}function isLineExists(_0x32ca3a){const _0x36e84d=_0x4dc7fe;return userLines[_0x36e84d(0x18b)](_0xc6dae1=>isSameLine(_0xc6dae1,_0x32ca3a));}function getRandomInt(_0x46bd2b,_0x2e463){const _0x19a93a=_0x4dc7fe;return _0x46bd2b=Math[_0x19a93a(0x1ac)](_0x46bd2b),_0x2e463=Math[_0x19a93a(0x1f8)](_0x2e463),Math[_0x19a93a(0x1f8)](Math['random']()*(_0x2e463-_0x46bd2b+0x1))+_0x46bd2b;}function isTooClose(_0x24174c,_0x343d1f,_0x4ca832=MIN_DIST){const _0x22ec36=_0x4ca832**0x2;for(const _0x56fe56 of _0x343d1f){const _0x1eb43d=(_0x24174c['x']-_0x56fe56['x'])**0x2+(_0x24174c['y']-_0x56fe56['y'])**0x2;if(_0x1eb43d<_0x22ec36)return!![];}return![];}function isTooLinear(_0x4a253a,_0xfc1994,_0x39daf2){const _0x307a2e=_0x4dc7fe,_0x535cdf=(_0xfc1994['y']-_0x4a253a['y'])*(_0x39daf2['x']-_0xfc1994['x'])-(_0x39daf2['y']-_0xfc1994['y'])*(_0xfc1994['x']-_0x4a253a['x']);return Math[_0x307a2e(0x21d)](_0x535cdf)<COLLINEARITY_THRESHOLD;}function isTooSharpAngle(_0x3458e1,_0x2b6390,_0xac8a55){const _0x41c4cf=_0x4dc7fe,_0x3b88e4=_0x3458e1['x']-_0x2b6390['x'],_0x57d693=_0x3458e1['y']-_0x2b6390['y'],_0xe46408=_0xac8a55['x']-_0x2b6390['x'],_0x5687a1=_0xac8a55['y']-_0x2b6390['y'],_0x635d9c=_0x3b88e4*_0xe46408+_0x57d693*_0x5687a1,_0x9ca1fa=Math['sqrt'](_0x3b88e4*_0x3b88e4+_0x57d693*_0x57d693),_0x3d8273=Math[_0x41c4cf(0x1df)](_0xe46408*_0xe46408+_0x5687a1*_0x5687a1);if(_0x9ca1fa===0x0||_0x3d8273===0x0)return!![];const _0x174b1a=_0x635d9c/(_0x9ca1fa*_0x3d8273);return _0x174b1a>MIN_ANGLE_COSINE||_0x174b1a<MAX_ANGLE_COSINE;}function isTooWeakSlope(_0x35c2cf,_0x5ab872){const _0x33acbf=_0x4dc7fe,_0x491a17=Math[_0x33acbf(0x21d)](_0x5ab872['x']-_0x35c2cf['x']),_0x32157a=Math[_0x33acbf(0x21d)](_0x5ab872['y']-_0x35c2cf['y']);return _0x491a17<=MIN_SLOPE_DIFF||_0x32157a<=MIN_SLOPE_DIFF||_0x491a17>0x0&&_0x32157a>0x0&&Math['abs'](_0x32157a/_0x491a17)<0x1;}function isProblemTooLinear(_0x34c603,_0x5ea17a){const _0x102672=_0x4dc7fe;if(_0x34c603[_0x102672(0x1db)]<0x2)return![];const _0x152740=_0x34c603[_0x34c603[_0x102672(0x1db)]-0x2],_0x33c178=_0x34c603[_0x34c603[_0x102672(0x1db)]-0x1];for(let _0xaf8606=0x0;_0xaf8606<_0x34c603[_0x102672(0x1db)]-0x1;_0xaf8606++)if(isTooLinear(_0x34c603[_0xaf8606],_0x33c178,_0x5ea17a))return!![];return isTooLinear(_0x152740,_0x33c178,_0x5ea17a);}function isProblemTooSharp(_0x2591fe,_0x1abb4f){const _0x5b68a7=_0x4dc7fe;if(_0x2591fe[_0x5b68a7(0x1db)]<0x2)return![];const _0x332d61=_0x2591fe[_0x2591fe[_0x5b68a7(0x1db)]-0x2],_0x41a7df=_0x2591fe[_0x2591fe[_0x5b68a7(0x1db)]-0x1],_0x588a55=_0x6e8d95=>_0x6e8d95['x']===HALF_COUNT||_0x6e8d95['y']===HALF_COUNT||_0x6e8d95['x']===_0x6e8d95['y'];if(_0x588a55(_0x332d61)&&_0x588a55(_0x41a7df)&&_0x588a55(_0x1abb4f))return![];for(let _0xcf399d=0x1;_0xcf399d<_0x2591fe[_0x5b68a7(0x1db)];_0xcf399d++)if(isTooSharpAngle(_0x2591fe[_0xcf399d-0x1],_0x2591fe[_0xcf399d],_0x1abb4f))return!![];return isTooSharpAngle(_0x332d61,_0x41a7df,_0x1abb4f);}function distSq(_0x339c8a,_0x3d2017){return(_0x339c8a['x']-_0x3d2017['x'])**0x2+(_0x339c8a['y']-_0x3d2017['y'])**0x2;}function calculateSymmetricPoint(_0x229874,_0x588e3e,_0x213bb0=![],_0x58dbc6=_0x4dc7fe(0x257)){const _0x3e6e49=_0x4dc7fe;let _0x9cba81,_0x3b3b40;const _0x5a68b9=HALF_COUNT;if(_0x588e3e===_0x3e6e49(0x21f)){if(_0x213bb0)_0x9cba81=_0x229874['y'],_0x3b3b40=_0x229874['x'];else _0x58dbc6===_0x3e6e49(0x183)?(_0x9cba81=_0x229874['x'],_0x3b3b40=0x2*_0x5a68b9-_0x229874['y']):(_0x9cba81=0x2*_0x5a68b9-_0x229874['x'],_0x3b3b40=_0x229874['y']);}else{if(_0x588e3e==='point')_0x9cba81=0x2*_0x5a68b9-_0x229874['x'],_0x3b3b40=0x2*_0x5a68b9-_0x229874['y'];else return _0x229874;}return{'x':Math[_0x3e6e49(0x24f)](_0x9cba81),'y':Math[_0x3e6e49(0x24f)](_0x3b3b40)};}function createSequentialLines(_0x376a6b,_0x4bd021=![]){const _0x1ffaed=_0x4dc7fe,_0x17f60d=[];if(_0x376a6b[_0x1ffaed(0x1db)]<0x2)return _0x17f60d;const _0x1026c1=_0x376a6b['length'];for(let _0x4f4e7d=0x0;_0x4f4e7d<_0x1026c1;_0x4f4e7d++){const _0x20c665=_0x376a6b[_0x4f4e7d],_0x5425c9=_0x376a6b[(_0x4f4e7d+0x1)%_0x1026c1];if(!_0x4bd021&&_0x4f4e7d===_0x1026c1-0x1)break;_0x17f60d['push']({'p1':_0x20c665,'p2':_0x5425c9});}return _0x17f60d;}function findPointSymmetricBoundary(_0x429e06){const _0x408d7c=_0x4dc7fe;if(_0x429e06[_0x408d7c(0x1db)]<0x3)return _0x429e06;const _0x368ed3=CENTER_POINT,_0x339030=_0x429e06[_0x408d7c(0x24e)](_0x57a78c=>isSamePoint(_0x57a78c,_0x368ed3)),_0x4797e9=_0x429e06['filter'](_0x370edd=>!isSamePoint(_0x370edd,_0x368ed3));_0x4797e9[_0x408d7c(0x248)]((_0x30d066,_0x13c259)=>Math[_0x408d7c(0x25b)](_0x30d066['y']-_0x368ed3['y'],_0x30d066['x']-_0x368ed3['x'])-Math['atan2'](_0x13c259['y']-_0x368ed3['y'],_0x13c259['x']-_0x368ed3['x']));let _0x32eebe=[];if(_0x339030)_0x32eebe[_0x408d7c(0x161)](_0x339030);return _0x32eebe=_0x32eebe[_0x408d7c(0x252)](_0x4797e9),_0x32eebe['filter']((_0x6f3d3d,_0x5de490,_0x386ca8)=>_0x5de490===_0x386ca8[_0x408d7c(0x176)](_0x12856d=>isSamePoint(_0x12856d,_0x6f3d3d)));}function sortSlantedAxisVertices(_0x66715c){const _0x48445a=_0x4dc7fe,_0x2e3836=_0x66715c[_0x48445a(0x1a2)](_0x222856=>_0x222856['x']===_0x222856['y'])[_0x48445a(0x248)]((_0x199eec,_0x4194d0)=>_0x199eec['y']-_0x4194d0['y']),_0x1ccc5e=_0x66715c[_0x48445a(0x1a2)](_0xdc3833=>_0xdc3833['x']!==_0xdc3833['y']),_0x3ece87=_0x2e3836[0x0],_0x33317a=_0x2e3836[0x1],_0x57a4fb=_0x1ccc5e[_0x48445a(0x1a2)](_0x41cfeb=>_0x41cfeb['y']<_0x41cfeb['x']),_0x2811b8=_0x1ccc5e[_0x48445a(0x1a2)](_0xf163dd=>_0xf163dd['y']>_0xf163dd['x']);return _0x57a4fb[_0x48445a(0x248)]((_0x304ee7,_0x2cf65e)=>Math[_0x48445a(0x25b)](_0x304ee7['y']-_0x3ece87['y'],_0x304ee7['x']-_0x3ece87['x'])-Math[_0x48445a(0x25b)](_0x2cf65e['y']-_0x3ece87['y'],_0x2cf65e['x']-_0x3ece87['x'])),_0x2811b8[_0x48445a(0x248)]((_0x1def0c,_0x566dca)=>Math[_0x48445a(0x25b)](_0x566dca['y']-_0x33317a['y'],_0x566dca['x']-_0x33317a['x'])-Math[_0x48445a(0x25b)](_0x1def0c['y']-_0x33317a['y'],_0x1def0c['x']-_0x33317a['x'])),[_0x3ece87,..._0x57a4fb,_0x33317a,..._0x2811b8];}function generateRandomProblem(_0x1dc4ce,_0x559bf1=null){const _0x284add=_0x4dc7fe,_0x421951=0x64;if(_0x1dc4ce===_0x284add(0x21f)){let _0x544487,_0x44be73,_0x7029bb,_0x19a7f5=![],_0x4a3e91=_0x284add(0x257);const _0x47186c=selectedDifficulty===_0x284add(0x18c)?'1':selectedDifficulty;if(_0x559bf1)_0x544487=_0x559bf1,_0x44be73=MIN_COORD,_0x7029bb=MAX_COORD,_0x19a7f5=![],_0x4a3e91=Math[_0x284add(0x1c1)]()<0.5?'vertical':_0x284add(0x183);else _0x47186c==0x2?(_0x19a7f5=Math[_0x284add(0x1c1)]()<0.5,_0x19a7f5?(_0x544487=getRandomInt(0x3,0x4),_0x44be73=MIN_COORD,_0x7029bb=MAX_COORD,_0x4a3e91=_0x284add(0x170)):(_0x544487=getRandomInt(0x5,0x6),_0x44be73=MIN_COORD-0x1,_0x7029bb=MAX_COORD+0x1,_0x4a3e91=Math[_0x284add(0x1c1)]()<0.5?_0x284add(0x257):_0x284add(0x183))):(_0x19a7f5=![],_0x544487=0x4,_0x44be73=MIN_COORD,_0x7029bb=MAX_COORD,_0x4a3e91=Math[_0x284add(0x1c1)]()<0.5?_0x284add(0x257):'horizontal');if(_0x19a7f5){const _0x2b84cd={'x':HALF_COUNT,'y':HALF_COUNT},_0x3de0c1=getRandomInt(Math[_0x284add(0x1f8)](GRID_COUNT*0.15),Math[_0x284add(0x1f8)](GRID_COUNT*0.35)),_0x2bdfd9={'x':_0x2b84cd['x']-_0x3de0c1,'y':_0x2b84cd['y']-_0x3de0c1},_0x1d6f94={'x':_0x2b84cd['x']+_0x3de0c1,'y':_0x2b84cd['y']+_0x3de0c1};let _0x12ecbb=[_0x2bdfd9];for(let _0xa54f0c=0x0;_0xa54f0c<_0x544487-0x2;_0xa54f0c++){let _0x50abf2,_0x293d60=![],_0x283249=0x0;while(!_0x293d60&&_0x283249<_0x421951){let _0x4e3567=getRandomInt(_0x44be73,_0x7029bb),_0x642f27=getRandomInt(_0x44be73,_0x4e3567-0x1);_0x50abf2={'x':_0x4e3567,'y':_0x642f27};let _0x5dc432=!![];_0x12ecbb['length']>=0x2&&(isTooSharpAngle(_0x12ecbb[_0x12ecbb[_0x284add(0x1db)]-0x2],_0x12ecbb[_0x12ecbb['length']-0x1],_0x50abf2)&&(_0x5dc432=![]));if(_0x12ecbb['length']>0x0){let _0x5c6af3=calculateSymmetricPoint(_0x50abf2,_0x284add(0x21f),!![]);isTooSharpAngle(_0x12ecbb[_0x12ecbb[_0x284add(0x1db)]-0x1],_0x50abf2,_0x5c6af3)&&(_0x5dc432=![]);}_0x5dc432&&!isTooClose(_0x50abf2,_0x12ecbb)&&!isProblemTooLinear(_0x12ecbb,_0x50abf2)&&(_0x12ecbb[_0x284add(0x161)](_0x50abf2),_0x293d60=!![]),_0x283249++;}if(!_0x293d60)return null;}_0x12ecbb[_0x284add(0x161)](_0x1d6f94);let _0x404183=[..._0x12ecbb];if(_0x404183['length']<0x3)return null;if(isTooLinear(_0x404183[_0x404183['length']-0x2],_0x404183[_0x404183['length']-0x1],_0x404183[0x0])||isTooSharpAngle(_0x404183[_0x404183[_0x284add(0x1db)]-0x2],_0x404183[_0x404183[_0x284add(0x1db)]-0x1],_0x404183[0x0]))return null;let _0x2515b9=sortSlantedAxisVertices(_0x404183);if(_0x2515b9['length']>=0x3)for(let _0x95b658=0x0;_0x95b658<_0x2515b9['length']-0x2;_0x95b658++){if(isTooLinear(_0x2515b9[_0x95b658],_0x2515b9[_0x95b658+0x1],_0x2515b9[_0x95b658+0x2]))return null;}const _0x4a0fda=createSequentialLines(_0x2515b9,![]),_0x2d16b5=_0x4a0fda[_0x284add(0x1a2)](_0x1ea1de=>(_0x1ea1de['p1']['x']+_0x1ea1de['p2']['x'])/0x2>(_0x1ea1de['p1']['y']+_0x1ea1de['p2']['y'])/0x2);let _0x2e7ff1=_0x2d16b5[_0x284add(0x169)]((_0x3c18a7,_0x5a3867)=>{const _0x43e1ac=_0x284add;if(!_0x3c18a7['some'](_0x26f286=>isSamePoint(_0x26f286,_0x5a3867['p1'])))_0x3c18a7[_0x43e1ac(0x161)](_0x5a3867['p1']);if(!_0x3c18a7[_0x43e1ac(0x18b)](_0x1b0f5c=>isSamePoint(_0x1b0f5c,_0x5a3867['p2'])))_0x3c18a7[_0x43e1ac(0x161)](_0x5a3867['p2']);return _0x3c18a7;},[]);if(_0x2e7ff1[_0x284add(0x1a2)](_0x283c2b=>_0x283c2b['x']===_0x283c2b['y'])[_0x284add(0x1db)]<0x2)return null;return{'type':_0x284add(0x21f),'isSlantedAxis':!![],'axisDirection':'slanted','initialVertices':_0x2e7ff1,'initialLines':_0x2d16b5,'allVertices':_0x2515b9,'allLines':_0x4a0fda};}else{let _0x305f58;if(_0x4a3e91==='vertical'){const _0x110dc3={'x':HALF_COUNT,'y':getRandomInt(_0x44be73,HALF_COUNT-0x2)},_0xbfb9ad={'x':HALF_COUNT,'y':getRandomInt(HALF_COUNT+0x2,_0x7029bb)};let _0x21707d=[];for(let _0x2dfce4=0x0;_0x2dfce4<_0x544487-0x2;_0x2dfce4++){let _0x4e0682,_0x3c10e1=![],_0x402b5c=0x0;while(!_0x3c10e1&&_0x402b5c<_0x421951){_0x4e0682={'x':getRandomInt(_0x44be73,HALF_COUNT-0x1),'y':getRandomInt(_0x110dc3['y'],_0xbfb9ad['y'])};let _0x5bcad9=!isTooClose(_0x4e0682,[..._0x21707d,_0x110dc3,_0xbfb9ad]);_0x21707d['length']>0x0&&isTooWeakSlope(_0x21707d[_0x21707d['length']-0x1],_0x4e0682)&&(_0x5bcad9=![]),_0x5bcad9&&(_0x21707d[_0x284add(0x161)](_0x4e0682),_0x3c10e1=!![]),_0x402b5c++;}if(!_0x3c10e1)return null;}_0x21707d[_0x284add(0x248)]((_0x470f80,_0x1a0155)=>_0x470f80['y']-_0x1a0155['y']),_0x305f58=[_0x110dc3,..._0x21707d,_0xbfb9ad];}else{const _0x264605={'x':getRandomInt(_0x44be73,HALF_COUNT-0x2),'y':HALF_COUNT},_0x33fc6f={'x':getRandomInt(HALF_COUNT+0x2,_0x7029bb),'y':HALF_COUNT};let _0x2926e9=[];for(let _0xb5e588=0x0;_0xb5e588<_0x544487-0x2;_0xb5e588++){let _0x24c11b,_0x39ca5d=![],_0x566fd2=0x0;while(!_0x39ca5d&&_0x566fd2<_0x421951){_0x24c11b={'x':getRandomInt(_0x264605['x'],_0x33fc6f['x']),'y':getRandomInt(_0x44be73,HALF_COUNT-0x1)};let _0x52ea72=!isTooClose(_0x24c11b,[..._0x2926e9,_0x264605,_0x33fc6f]);_0x2926e9['length']>0x0&&isTooWeakSlope(_0x2926e9[_0x2926e9[_0x284add(0x1db)]-0x1],_0x24c11b)&&(_0x52ea72=![]),_0x52ea72&&(_0x2926e9[_0x284add(0x161)](_0x24c11b),_0x39ca5d=!![]),_0x566fd2++;}if(!_0x39ca5d)return null;}_0x2926e9['sort']((_0x27cb13,_0x4cb9e8)=>_0x27cb13['x']-_0x4cb9e8['x']),_0x305f58=[_0x264605,..._0x2926e9,_0x33fc6f];}if(_0x305f58['length']<0x2)return null;if(_0x305f58['length']>=0x3)for(let _0x1840b3=0x0;_0x1840b3<_0x305f58['length']-0x2;_0x1840b3++){if(isTooLinear(_0x305f58[_0x1840b3],_0x305f58[_0x1840b3+0x1],_0x305f58[_0x1840b3+0x2]))return null;}let _0x5715f8=_0x305f58['concat'](_0x305f58[_0x284add(0x1da)](_0x5a9c50=>calculateSymmetricPoint(_0x5a9c50,'line',![],_0x4a3e91))[_0x284add(0x1ee)]());return _0x5715f8=_0x5715f8[_0x284add(0x1a2)]((_0x3a9259,_0x53c429,_0x571681)=>_0x53c429===_0x571681[_0x284add(0x176)](_0x4a9d0e=>isSamePoint(_0x4a9d0e,_0x3a9259))),{'type':'line','isSlantedAxis':![],'axisDirection':_0x4a3e91,'initialVertices':_0x305f58,'initialLines':createSequentialLines(_0x305f58,![]),'allVertices':_0x5715f8,'allLines':createSequentialLines(_0x5715f8,!![])};}}else{if(_0x1dc4ce==='point'){const _0x1e08ab=selectedDifficulty==='practice'?'1':selectedDifficulty,_0x1ebacc=_0x559bf1?_0x559bf1:_0x1e08ab==0x1?0x4:getRandomInt(0x5,0x6);let _0x22007b=[];const _0xe94189=Math[_0x284add(0x1c1)]()<0.5;let _0x2cc3a6,_0x4c5b24;if(_0xe94189){const _0xea235d=CENTER_POINT['y'],_0x55d11f=getRandomInt(Math[_0x284add(0x1f8)](GRID_COUNT*0.15),Math[_0x284add(0x1f8)](GRID_COUNT*0.35));_0x2cc3a6={'x':CENTER_POINT['x']-_0x55d11f,'y':_0xea235d},_0x4c5b24={'x':CENTER_POINT['x']+_0x55d11f,'y':_0xea235d};}else{const _0x466146=CENTER_POINT['x'],_0x2403e2=getRandomInt(Math[_0x284add(0x1f8)](GRID_COUNT*0.15),Math[_0x284add(0x1f8)](GRID_COUNT*0.35));_0x2cc3a6={'x':_0x466146,'y':CENTER_POINT['y']-_0x2403e2},_0x4c5b24={'x':_0x466146,'y':CENTER_POINT['y']+_0x2403e2};}_0x22007b[_0x284add(0x161)](_0x2cc3a6);let _0x31ce78=[];for(let _0x49afab=0x0;_0x49afab<_0x1ebacc-0x2;_0x49afab++){let _0x4bda62,_0x317c45=![],_0x5c50ba=0x0;while(!_0x317c45&&_0x5c50ba<_0x421951){let _0x280726,_0x29afb4;_0xe94189?(_0x280726=getRandomInt(MIN_COORD,MAX_COORD),_0x29afb4=getRandomInt(MIN_COORD,CENTER_POINT['y']-0x1)):(_0x280726=getRandomInt(MIN_COORD,CENTER_POINT['x']-0x1),_0x29afb4=getRandomInt(MIN_COORD,MAX_COORD)),_0x4bda62={'x':_0x280726,'y':_0x29afb4},!isTooClose(_0x4bda62,[..._0x22007b,..._0x31ce78])&&(_0x31ce78[_0x284add(0x161)](_0x4bda62),_0x317c45=!![]),_0x5c50ba++;}if(!_0x317c45)return null;}_0x31ce78[_0x284add(0x248)]((_0x29f010,_0x28f4e7)=>Math['atan2'](_0x29f010['y']-CENTER_POINT['y'],_0x29f010['x']-CENTER_POINT['x'])-Math['atan2'](_0x28f4e7['y']-CENTER_POINT['y'],_0x28f4e7['x']-CENTER_POINT['x'])),_0x22007b=_0x22007b['concat'](_0x31ce78),_0x22007b[_0x284add(0x161)](_0x4c5b24);let _0x464708=[],_0x4ac4ee=new Set();_0x22007b['forEach'](_0x45f0bd=>{const _0x1d427f=_0x284add,_0x1e48bb=_0x45f0bd['x']+','+_0x45f0bd['y'];if(!_0x4ac4ee[_0x1d427f(0x1b9)](_0x1e48bb)){_0x464708['push'](_0x45f0bd),_0x4ac4ee[_0x1d427f(0x15b)](_0x1e48bb);const _0x3fe796=calculateSymmetricPoint(_0x45f0bd,_0x1d427f(0x1c8)),_0x1109e1=_0x3fe796['x']+','+_0x3fe796['y'];!_0x4ac4ee[_0x1d427f(0x1b9)](_0x1109e1)&&(_0x464708[_0x1d427f(0x161)](_0x3fe796),_0x4ac4ee[_0x1d427f(0x15b)](_0x1109e1));}}),_0x464708=findPointSymmetricBoundary(_0x464708);if(_0x464708[_0x284add(0x1db)]>=0x3)for(let _0x2a5084=0x0;_0x2a5084<_0x464708[_0x284add(0x1db)];_0x2a5084++){const _0x4a3bbd=_0x464708[_0x284add(0x1db)],_0x450e68=_0x464708[(_0x2a5084-0x1+_0x4a3bbd)%_0x4a3bbd],_0x460520=_0x464708[_0x2a5084],_0x51274d=_0x464708[(_0x2a5084+0x1)%_0x4a3bbd];if(isTooLinear(_0x450e68,_0x460520,_0x51274d)||isTooSharpAngle(_0x450e68,_0x460520,_0x51274d))return null;}const _0x4fae6a=createSequentialLines(_0x464708,!![]),_0x44ec6a=[],_0x12d58f=new Set(_0x22007b[_0x284add(0x1da)](_0x4a3734=>_0x4a3734['x']+','+_0x4a3734['y']));return _0x4fae6a['forEach'](_0x491c81=>{const _0x86dac8=_0x284add;_0x12d58f[_0x86dac8(0x1b9)](_0x491c81['p1']['x']+','+_0x491c81['p1']['y'])&&_0x12d58f[_0x86dac8(0x1b9)](_0x491c81['p2']['x']+','+_0x491c81['p2']['y'])&&_0x44ec6a['push'](_0x491c81);}),{'type':_0x284add(0x1c8),'initialVertices':_0x22007b,'initialLines':_0x44ec6a,'allVertices':_0x464708,'allLines':_0x4fae6a};}}return null;}function initializeSetupListeners(){const _0x147777=_0x4dc7fe;document['querySelectorAll']('#type-select\x20button')[_0x147777(0x179)](_0x3d2a15=>{const _0x2d67df=_0x147777;_0x3d2a15[_0x2d67df(0x230)](_0x2d67df(0x1f4),handleTypeSelect);}),document[_0x147777(0x184)](_0x147777(0x1f5))[_0x147777(0x179)](_0x11aeec=>{const _0x551af0=_0x147777;_0x11aeec['addEventListener'](_0x551af0(0x1f4),handleDifficultySelect);}),document[_0x147777(0x244)](_0x147777(0x1c0))[_0x147777(0x230)]('click',()=>changeQuantity(-0x5)),document[_0x147777(0x244)](_0x147777(0x219))[_0x147777(0x230)](_0x147777(0x1f4),()=>changeQuantity(0x5)),document[_0x147777(0x244)](_0x147777(0x16c))['addEventListener'](_0x147777(0x1f4),()=>changeTimeLimit(-0x1)),document['getElementById'](_0x147777(0x1d8))[_0x147777(0x230)]('click',()=>changeTimeLimit(0x1));}function _0x5564(_0x38c805,_0x451848){const _0xb6fda8=_0xb6fd();return _0x5564=function(_0x556472,_0x1d84f8){_0x556472=_0x556472-0x157;let _0x11c466=_0xb6fda8[_0x556472];return _0x11c466;},_0x5564(_0x38c805,_0x451848);}function updateSettingsOverlay(){const _0x5173cf=_0x4dc7fe,_0x15a37=document[_0x5173cf(0x244)](_0x5173cf(0x191)),_0x3c28aa=document[_0x5173cf(0x244)]('overlay-message'),_0x2d23a4=selectedDifficulty===_0x5173cf(0x18c);_0x2d23a4?(_0x15a37[_0x5173cf(0x1ab)][_0x5173cf(0x254)]=_0x5173cf(0x19f),gameMode===_0x5173cf(0x15e)?_0x3c28aa[_0x5173cf(0x203)]=_0x5173cf(0x164):_0x3c28aa['innerHTML']=_0x5173cf(0x162)):_0x15a37[_0x5173cf(0x1ab)]['display']=_0x5173cf(0x20e);}function selectGameMode(_0x5c65d0){const _0x5f0447=_0x4dc7fe;gameMode=_0x5c65d0;const _0x7eb4a=document[_0x5f0447(0x244)](_0x5f0447(0x1b1)),_0x1256ec=document[_0x5f0447(0x244)](_0x5f0447(0x168));gameMode==='classic'?(_0x7eb4a[_0x5f0447(0x1ab)][_0x5f0447(0x254)]='block',_0x1256ec[_0x5f0447(0x1ab)][_0x5f0447(0x254)]=_0x5f0447(0x20e)):(_0x7eb4a[_0x5f0447(0x1ab)]['display']=_0x5f0447(0x20e),_0x1256ec[_0x5f0447(0x1ab)]['display']=_0x5f0447(0x234)),updateSettingsOverlay(),showPage(_0x5f0447(0x1ef));}function changeTimeLimit(_0x2e61cf){const _0x1df532=_0x4dc7fe,_0x4fb5c9=document[_0x1df532(0x244)]('time-limit-display'),_0x2010c4=timeOptions[_0x1df532(0x1d9)](timeLimitInMinutes);let _0x53e5b6=_0x2010c4+_0x2e61cf;if(_0x53e5b6<0x0)_0x53e5b6=timeOptions[_0x1df532(0x1db)]-0x1;else _0x53e5b6>=timeOptions['length']&&(_0x53e5b6=0x0);timeLimitInMinutes=timeOptions[_0x53e5b6],_0x4fb5c9[_0x1df532(0x229)]=timeLimitInMinutes+'ë¶„';}function nextProblem(){const _0x4f0daa=_0x4dc7fe;closePopup(),currentProblem++,currentProblemAttempts=0x0,userVertices=[],userLines=[];if(gameMode==='timeAttack'){if(timerInterval){let _0x338bde=null,_0x46e1ce=0x0;const _0x20225f=0x64;while(!_0x338bde&&_0x46e1ce<_0x20225f){let _0x5c4fba=selectedType===_0x4f0daa(0x23d)?Math['random']()<0.5?_0x4f0daa(0x21f):'point':selectedType;_0x338bde=generateRandomProblem(_0x5c4fba),_0x46e1ce++;}if(_0x338bde)problemList[_0x4f0daa(0x161)](_0x338bde);else{stopTimer(),showFinalResult();return;}}else{showFinalResult();return;}}if(gameMode===_0x4f0daa(0x15e)&&currentProblem>=totalProblems){showFinalResult();return;}loadProblem(),saveGameState();}function handleTypeSelect(_0x283657){const _0x1d3c0e=_0x4dc7fe;document[_0x1d3c0e(0x184)](_0x1d3c0e(0x253))[_0x1d3c0e(0x179)](_0x2647c9=>_0x2647c9[_0x1d3c0e(0x1b5)]['remove']('selected')),_0x283657[_0x1d3c0e(0x221)][_0x1d3c0e(0x1b5)]['add']('selected'),selectedType=_0x283657[_0x1d3c0e(0x221)][_0x1d3c0e(0x22e)](_0x1d3c0e(0x202));}function handleDifficultySelect(_0x18200e){const _0x2a641d=_0x4dc7fe;document[_0x2a641d(0x184)]('#difficulty-select\x20button')[_0x2a641d(0x179)](_0x687c8f=>_0x687c8f[_0x2a641d(0x1b5)][_0x2a641d(0x1d1)]('selected')),_0x18200e['currentTarget']['classList']['add'](_0x2a641d(0x222)),selectedDifficulty=_0x18200e[_0x2a641d(0x221)][_0x2a641d(0x22e)](_0x2a641d(0x194)),updateSettingsOverlay();}function changeQuantity(_0x4d2813){const _0xb32747=_0x4dc7fe,_0x7bc09d=parseInt(document['getElementById'](_0xb32747(0x20b))[_0xb32747(0x229)]);let _0x4cb35f=_0x7bc09d+_0x4d2813;if(_0x4cb35f<0x5)_0x4cb35f=0x5;if(_0x4cb35f>0x32)_0x4cb35f=0x32;document[_0xb32747(0x244)]('problem-quantity')[_0xb32747(0x229)]=_0x4cb35f,totalProblems=_0x4cb35f;}function generateProblemWithRetry(_0x12ce28,_0x2d18c5=null){let _0x5be0da=null,_0x1cb539=0x0;const _0x3100f4=0x64;while(!_0x5be0da&&_0x1cb539<_0x3100f4){_0x5be0da=generateRandomProblem(_0x12ce28,_0x2d18c5),_0x1cb539++;}return _0x5be0da;}function startQuiz(){const _0x2d4f3b=_0x4dc7fe;currentProblem=0x0,score={'results':[]},currentProblemAttempts=0x0,userVertices=[],userLines=[],tempLineStart=null,hoveredLine=null,problemList=[],hasSubmittedScore=![];if(selectedDifficulty===_0x2d4f3b(0x18c)){gameMode===_0x2d4f3b(0x1d2)&&(timeLimitInMinutes=0x2);totalProblems=0x3;if(selectedType===_0x2d4f3b(0x21f))problemList[_0x2d4f3b(0x161)](generateProblemWithRetry('line',0x3)),problemList[_0x2d4f3b(0x161)](generateProblemWithRetry('line',0x4)),problemList['push'](generateProblemWithRetry(_0x2d4f3b(0x21f),0x5));else selectedType===_0x2d4f3b(0x1c8)?(problemList['push'](generateProblemWithRetry(_0x2d4f3b(0x1c8),0x4)),problemList[_0x2d4f3b(0x161)](generateProblemWithRetry(_0x2d4f3b(0x1c8),0x4)),problemList[_0x2d4f3b(0x161)](generateProblemWithRetry('point',0x4))):(problemList[_0x2d4f3b(0x161)](generateProblemWithRetry('line',0x3)),problemList[_0x2d4f3b(0x161)](generateProblemWithRetry('line',0x4)),problemList[_0x2d4f3b(0x161)](generateRandomProblem(_0x2d4f3b(0x1c8),0x4)));problemList=problemList[_0x2d4f3b(0x1a2)](_0x14068d=>_0x14068d!==null),totalProblems=problemList[_0x2d4f3b(0x1db)];}else{let _0x51d8d8=gameMode===_0x2d4f3b(0x15e)?totalProblems:0x1,_0x1c3b83=0x0;const _0x743193=_0x51d8d8*0x14;let _0x4071b5=new Set();while(problemList[_0x2d4f3b(0x1db)]<_0x51d8d8&&_0x1c3b83<_0x743193){let _0x1c3556=selectedType===_0x2d4f3b(0x23d)?Math[_0x2d4f3b(0x1c1)]()<0.5?_0x2d4f3b(0x21f):_0x2d4f3b(0x1c8):selectedType;const _0x5869bc=generateRandomProblem(_0x1c3556);if(_0x5869bc&&_0x5869bc[_0x2d4f3b(0x1ca)][_0x2d4f3b(0x1db)]>=0x2){const _0x2862cf=JSON[_0x2d4f3b(0x1f2)](_0x5869bc[_0x2d4f3b(0x1ca)][_0x2d4f3b(0x1da)](_0x5756fc=>_0x5756fc['x']+','+_0x5756fc['y'])[_0x2d4f3b(0x248)]());!_0x4071b5['has'](_0x2862cf)&&(problemList['push'](_0x5869bc),_0x4071b5[_0x2d4f3b(0x15b)](_0x2862cf));}_0x1c3b83++;}gameMode===_0x2d4f3b(0x15e)&&(totalProblems=problemList['length']);}if(problemList['length']===0x0){alert('ë¬¸ì œ\x20ìƒì„±ì—\x20ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\x20ë‹¤ë¥¸\x20ì„¤ì •ìœ¼ë¡œ\x20ë‹¤ì‹œ\x20ì‹œë„í•´\x20ì£¼ì„¸ìš”.'),location[_0x2d4f3b(0x1d4)]();return;}showPage('problem-page');if(gameMode===_0x2d4f3b(0x1d2))startTimer();loadProblem();}function loadProblem(){const _0x20927b=_0x4dc7fe,_0x4bd3ef=gameMode===_0x20927b(0x1d2);if(!_0x4bd3ef&&currentProblem>=totalProblems&&totalProblems>0x0){showFinalResult();return;}if(_0x4bd3ef&&currentProblem>=problemList['length']&&!timerInterval){showFinalResult();return;}const _0x55debd=document[_0x20927b(0x244)]('timer-display'),_0xc03dec=document['getElementById'](_0x20927b(0x243));_0x4bd3ef?(_0xc03dec[_0x20927b(0x1ab)]['display']='none',_0x55debd[_0x20927b(0x1ab)]['display']=_0x20927b(0x234)):(_0xc03dec[_0x20927b(0x1ab)]['display']=_0x20927b(0x234),_0x55debd['style'][_0x20927b(0x254)]='none',_0xc03dec['textContent']=_0x20927b(0x20f)+(totalProblems-(currentProblem+0x1))+'ê°œ');const _0xa00f0b=problemList[currentProblem];if(!_0xa00f0b){console[_0x20927b(0x199)]('Problem\x20could\x20not\x20be\x20loaded.',{'currentProblem':currentProblem,'problemList':problemList}),showFinalResult();return;}const _0x4b84f1=_0xa00f0b[_0x20927b(0x1eb)]==='line'?_0x20927b(0x1c5):_0x20927b(0x19a);let _0x5d16a0=currentProblem+0x1+_0x20927b(0x167)+_0x4b84f1+')';const _0x28ef74=_0xa00f0b[_0x20927b(0x1eb)]===_0x20927b(0x21f)?'ì„ ëŒ€ì¹­ë„í˜•':_0x20927b(0x24b);let _0x2cff7f='ì•„ë˜\x20ë„í˜•ì€\x20'+_0x28ef74+'ì…ë‹ˆë‹¤.\x20ë‚˜ë¨¸ì§€\x20ë¶€ë¶„ì„\x20ì™„ì„±í•´\x20ì£¼ì„¸ìš”.';window[_0x20927b(0x16e)]<0x1e0&&(_0x5d16a0=currentProblem+0x1+_0x20927b(0x24c)+_0x4b84f1+')',_0x2cff7f='ì•„ë˜\x20ë„í˜•ì€\x20'+_0x28ef74+_0x20927b(0x186)),document[_0x20927b(0x244)]('problem-number')[_0x20927b(0x203)]=_0x5d16a0,document[_0x20927b(0x244)](_0x20927b(0x1ce))[_0x20927b(0x203)]=_0x2cff7f,document['getElementById']('check-answer-btn')[_0x20927b(0x1ab)][_0x20927b(0x254)]=_0x20927b(0x234),document[_0x20927b(0x244)](_0x20927b(0x187))['style'][_0x20927b(0x254)]='none',closePopup(),problemVertices=_0xa00f0b[_0x20927b(0x1ca)],problemLines=_0xa00f0b['initialLines'],tempLineStart=null,hoveredLine=null,setCanvasMode(_0x20927b(0x19d)),redrawCanvas();}function clearCanvas(_0x2ada21){const _0x48722a=_0x4dc7fe;_0x2ada21&&(userVertices=[],userLines=[],tempLineStart=null,hoveredLine=null),redrawCanvas(),setCanvasMode(_0x48722a(0x19d)),closePopup(),document[_0x48722a(0x244)](_0x48722a(0x217))[_0x48722a(0x1ab)][_0x48722a(0x254)]='block',document[_0x48722a(0x244)](_0x48722a(0x187))[_0x48722a(0x1ab)][_0x48722a(0x254)]=_0x48722a(0x20e);}function renderProblemVertices(){const _0x597ca2=_0x4dc7fe;document['querySelectorAll'](_0x597ca2(0x15c))[_0x597ca2(0x179)](_0x559c5e=>_0x559c5e[_0x597ca2(0x1d1)]()),problemVertices['forEach'](_0x17853b=>{const _0xc93611=_0x597ca2,_0x499372=document[_0xc93611(0x1a8)](_0xc93611(0x1de));_0x499372[_0xc93611(0x15a)]=_0xc93611(0x1b4),_0x499372['style'][_0xc93611(0x173)]=_0x17853b['x']/GRID_COUNT*0x64+'%',_0x499372[_0xc93611(0x1ab)][_0xc93611(0x1b3)]=_0x17853b['y']/GRID_COUNT*0x64+'%',canvasWrapper[_0xc93611(0x247)](_0x499372);});}function drawGrid(){const _0x178595=_0x4dc7fe;ctx['strokeStyle']=_0x178595(0x205),ctx[_0x178595(0x225)]=0.5,ctx[_0x178595(0x1c6)]([0x1,0x4]);for(let _0x9b975=0x0;_0x9b975<=canvas['width'];_0x9b975+=GRID_SIZE){ctx[_0x178595(0x18d)](),ctx[_0x178595(0x1bb)](_0x9b975,0x0),ctx['lineTo'](_0x9b975,canvas[_0x178595(0x197)]),ctx['stroke']();}for(let _0x5156dd=0x0;_0x5156dd<=canvas['height'];_0x5156dd+=GRID_SIZE){ctx[_0x178595(0x18d)](),ctx[_0x178595(0x1bb)](0x0,_0x5156dd),ctx[_0x178595(0x1dc)](canvas[_0x178595(0x1e6)],_0x5156dd),ctx['stroke']();}ctx['setLineDash']([]);if(problemList[_0x178595(0x1db)]>currentProblem&&problemList[currentProblem]){const _0x192f8e=problemList[currentProblem];ctx['strokeStyle']=_0x178595(0x160),ctx[_0x178595(0x225)]=0x2;if(_0x192f8e[_0x178595(0x1eb)]===_0x178595(0x21f)){if(_0x192f8e[_0x178595(0x239)])ctx[_0x178595(0x18d)](),ctx[_0x178595(0x1bb)](0x0,0x0),ctx[_0x178595(0x1dc)](canvas[_0x178595(0x1e6)],canvas['height']),ctx['stroke']();else{if(_0x192f8e['axisDirection']===_0x178595(0x257)){const _0x2e3509=canvas['width']/0x2;ctx[_0x178595(0x18d)](),ctx['moveTo'](_0x2e3509,0x0),ctx[_0x178595(0x1dc)](_0x2e3509,canvas[_0x178595(0x197)]),ctx['stroke']();}else{if(_0x192f8e['axisDirection']===_0x178595(0x183)){const _0x295181=canvas[_0x178595(0x197)]/0x2;ctx['beginPath'](),ctx[_0x178595(0x1bb)](0x0,_0x295181),ctx[_0x178595(0x1dc)](canvas['width'],_0x295181),ctx[_0x178595(0x18a)]();}}}}else{if(_0x192f8e['type']==='point'){const _0x59af64=canvas[_0x178595(0x1e6)]/0x2,_0x25f5ea=canvas[_0x178595(0x197)]/0x2;ctx['beginPath'](),ctx[_0x178595(0x233)](_0x59af64,_0x25f5ea,0x5,0x0,Math['PI']*0x2),ctx[_0x178595(0x1fd)]=_0x178595(0x160),ctx[_0x178595(0x208)]();}}}}function drawLines(_0x475f6e,_0x121f5b){const _0x2aab9d=_0x4dc7fe;ctx[_0x2aab9d(0x23f)]=_0x121f5b,ctx[_0x2aab9d(0x225)]=0x3,_0x475f6e[_0x2aab9d(0x179)](_0x33b189=>{const _0xfb5674=_0x2aab9d;ctx[_0xfb5674(0x18d)](),ctx[_0xfb5674(0x1bb)](_0x33b189['p1']['x']*GRID_SIZE,_0x33b189['p1']['y']*GRID_SIZE),ctx[_0xfb5674(0x1dc)](_0x33b189['p2']['x']*GRID_SIZE,_0x33b189['p2']['y']*GRID_SIZE),ctx[_0xfb5674(0x18a)]();});}function redrawCanvas(){const _0x42aef3=_0x4dc7fe;ctx['clearRect'](0x0,0x0,canvas[_0x42aef3(0x1e6)],canvas['height']),drawGrid(),drawLines(problemLines,'#007bff'),drawLines(userLines,_0x42aef3(0x200)),hoveredLine&&(ctx['save'](),ctx[_0x42aef3(0x23f)]=_0x42aef3(0x196),ctx[_0x42aef3(0x225)]=0x8,ctx[_0x42aef3(0x1a1)]=_0x42aef3(0x1fb),ctx[_0x42aef3(0x215)]=0xa,ctx[_0x42aef3(0x18d)](),ctx[_0x42aef3(0x1bb)](hoveredLine['p1']['x']*GRID_SIZE,hoveredLine['p1']['y']*GRID_SIZE),ctx[_0x42aef3(0x1dc)](hoveredLine['p2']['x']*GRID_SIZE,hoveredLine['p2']['y']*GRID_SIZE),ctx['stroke'](),ctx[_0x42aef3(0x188)]()),renderProblemVertices(),canvasMode===_0x42aef3(0x21f)?renderPointsForLineMode():renderUserVertices();}function renderPointsForLineMode(){const _0x1d84d3=_0x4dc7fe;document[_0x1d84d3(0x184)]('.user-dot,\x20.line-dot,\x20.selected-line-dot')[_0x1d84d3(0x179)](_0x1361a6=>_0x1361a6[_0x1d84d3(0x1d1)]());const _0x1b7fdf=[...problemVertices,...userVertices]['filter']((_0x1ce992,_0x1b1d41,_0x2fa40d)=>_0x1b1d41===_0x2fa40d[_0x1d84d3(0x176)](_0x1b3b78=>isSamePoint(_0x1b3b78,_0x1ce992)));_0x1b7fdf[_0x1d84d3(0x179)](_0x16caee=>{const _0xb222df=_0x1d84d3,_0x49fbf5=document[_0xb222df(0x1a8)](_0xb222df(0x1de));_0x49fbf5[_0xb222df(0x15a)]=tempLineStart&&isSamePoint(_0x16caee,tempLineStart)?_0xb222df(0x258):_0xb222df(0x23b),_0x49fbf5[_0xb222df(0x1ab)][_0xb222df(0x173)]=_0x16caee['x']/GRID_COUNT*0x64+'%',_0x49fbf5[_0xb222df(0x1ab)][_0xb222df(0x1b3)]=_0x16caee['y']/GRID_COUNT*0x64+'%',canvasWrapper[_0xb222df(0x247)](_0x49fbf5);});}function renderUserVertices(){const _0xe677d0=_0x4dc7fe;document['querySelectorAll']('.user-dot,\x20.line-dot,\x20.selected-line-dot')['forEach'](_0x92156c=>_0x92156c[_0xe677d0(0x1d1)]()),userVertices[_0xe677d0(0x179)](_0x300458=>{const _0x3cef08=_0xe677d0,_0x43a357=document[_0x3cef08(0x1a8)](_0x3cef08(0x1de));_0x43a357['className']=_0x3cef08(0x240),_0x43a357['style'][_0x3cef08(0x173)]=_0x300458['x']/GRID_COUNT*0x64+'%',_0x43a357['style'][_0x3cef08(0x1b3)]=_0x300458['y']/GRID_COUNT*0x64+'%',canvasWrapper[_0x3cef08(0x247)](_0x43a357);});}function isVertexOnProblemBoundary(_0x105ccf){const _0x353ef5=_0x4dc7fe;return problemVertices[_0x353ef5(0x18b)](_0x4a3f17=>isSamePoint(_0x4a3f17,_0x105ccf));}function showPopup(_0x50fc67,_0x41eb91,_0x100b6a){const _0x3564d7=_0x4dc7fe,_0x285c61=document[_0x3564d7(0x244)](_0x3564d7(0x16f)),_0x25c993=document[_0x3564d7(0x244)](_0x3564d7(0x1b7)),_0x23a872=document[_0x3564d7(0x244)]('popup-detail-message'),_0x2ce645=document[_0x3564d7(0x244)](_0x3564d7(0x220));_0x100b6a?(_0x25c993[_0x3564d7(0x203)]=_0x50fc67,_0x25c993[_0x3564d7(0x15a)]='correct',_0x23a872[_0x3564d7(0x1ab)]['display']=_0x3564d7(0x20e),_0x2ce645[_0x3564d7(0x1ab)][_0x3564d7(0x254)]=_0x3564d7(0x234)):(_0x25c993['innerHTML']=_0x50fc67+_0x3564d7(0x1f1)+_0x41eb91+_0x3564d7(0x1ff),_0x25c993['className']=_0x3564d7(0x17f),_0x23a872[_0x3564d7(0x1ab)][_0x3564d7(0x254)]=_0x3564d7(0x20e),_0x2ce645[_0x3564d7(0x1ab)][_0x3564d7(0x254)]=_0x3564d7(0x20e)),_0x285c61[_0x3564d7(0x1ab)][_0x3564d7(0x254)]=_0x3564d7(0x19f);}function closePopup(){const _0x54ddaf=_0x4dc7fe;document[_0x54ddaf(0x244)]('result-popup-overlay')[_0x54ddaf(0x1ab)][_0x54ddaf(0x254)]=_0x54ddaf(0x20e);}function checkAnswer(){const _0x4250f9=_0x4dc7fe,_0x2ffe1a=problemList[currentProblem];if(!_0x2ffe1a)return![];const _0x4776ec=_0x2ffe1a[_0x4250f9(0x1eb)];let _0x37db72=checkVerticesSymmetry(_0x4776ec),_0x208338=![];if(_0x37db72){if(_0x4776ec===_0x4250f9(0x21f))_0x208338=checkLineSymmetryLines(_0x2ffe1a);else{if(_0x4776ec===_0x4250f9(0x1c8))_0x208338=checkPointSymmetryLines(_0x2ffe1a);}}if(_0x37db72&&_0x208338)return score['results'][_0x4250f9(0x1db)]===currentProblem&&score[_0x4250f9(0x166)]['push'](currentProblemAttempts),showPopup(_0x4250f9(0x1f9),'',!![]),saveGameState(),document[_0x4250f9(0x244)]('check-answer-btn')[_0x4250f9(0x1ab)][_0x4250f9(0x254)]='none',document[_0x4250f9(0x244)](_0x4250f9(0x187))[_0x4250f9(0x1ab)]['display']=_0x4250f9(0x234),!![];else{let _0x1c2a57;if(!_0x37db72)_0x1c2a57=_0x4250f9(0x192);else{if(!_0x208338)_0x1c2a57=_0x4250f9(0x204);else _0x1c2a57=_0x4250f9(0x22f);}return currentProblemAttempts++,saveGameState(),showPopup(_0x4250f9(0x227),_0x1c2a57,![]),document[_0x4250f9(0x244)](_0x4250f9(0x217))[_0x4250f9(0x1ab)][_0x4250f9(0x254)]='block',document['getElementById'](_0x4250f9(0x187))[_0x4250f9(0x1ab)][_0x4250f9(0x254)]=_0x4250f9(0x20e),![];}}function checkVerticesSymmetry(_0x6a0373){const _0x486123=_0x4dc7fe,_0xcf4b65=problemList[currentProblem],_0x2e9bba=_0xcf4b65[_0x486123(0x1eb)]===_0x486123(0x21f)&&_0xcf4b65[_0x486123(0x239)],_0x4f6567=new Map();[...problemVertices,...userVertices]['forEach'](_0x48cef7=>{const _0x37aa20=_0x486123,_0x5a9f36=Math[_0x37aa20(0x24f)](_0x48cef7['x'])+','+Math[_0x37aa20(0x24f)](_0x48cef7['y']);if(!_0x4f6567[_0x37aa20(0x1b9)](_0x5a9f36))_0x4f6567[_0x37aa20(0x22b)](_0x5a9f36,{'x':Math[_0x37aa20(0x24f)](_0x48cef7['x']),'y':Math[_0x37aa20(0x24f)](_0x48cef7['y'])});});const _0x1b2a44=Array['from'](_0x4f6567['values']());if(_0x6a0373===_0x486123(0x21f)){let _0x3d994b;if(_0x2e9bba)_0x3d994b=_0x1b2a44[_0x486123(0x1a2)](_0x3df92d=>_0x3df92d['x']===_0x3df92d['y'])[_0x486123(0x1db)];else{if(_0xcf4b65[_0x486123(0x256)]===_0x486123(0x257))_0x3d994b=_0x1b2a44[_0x486123(0x1a2)](_0xe2a619=>_0xe2a619['x']===HALF_COUNT)[_0x486123(0x1db)];else{if(_0xcf4b65[_0x486123(0x256)]===_0x486123(0x183))_0x3d994b=_0x1b2a44['filter'](_0x216eb6=>_0x216eb6['y']===HALF_COUNT)['length'];}}if((_0x1b2a44[_0x486123(0x1db)]-_0x3d994b)%0x2!==0x0)return![];}let _0x1fe902=new Map();for(const _0x3af832 of _0x1b2a44){const _0x2fc0c8=_0x3af832['x']+','+_0x3af832['y'];if(_0x1fe902[_0x486123(0x1b9)](_0x2fc0c8))continue;const _0x478b55=calculateSymmetricPoint(_0x3af832,_0x6a0373,_0x2e9bba,_0xcf4b65[_0x486123(0x256)]);if(isSamePoint(_0x3af832,_0x478b55)){_0x1fe902[_0x486123(0x22b)](_0x2fc0c8,!![]);continue;}if(!_0x1b2a44[_0x486123(0x18b)](_0x220e93=>isSamePoint(_0x220e93,_0x478b55)))return![];_0x1fe902[_0x486123(0x22b)](_0x2fc0c8,!![]),_0x1fe902[_0x486123(0x22b)](_0x478b55['x']+','+_0x478b55['y'],!![]);}return!![];}function checkLineSymmetryLines(_0x28ab5d){const _0x40c19c=_0x4dc7fe,_0x3448ca=_0x28ab5d[_0x40c19c(0x18e)]['map'](_0x36d68f=>({'p1':calculateSymmetricPoint(_0x36d68f['p1'],'line',_0x28ab5d[_0x40c19c(0x239)],_0x28ab5d[_0x40c19c(0x256)]),'p2':calculateSymmetricPoint(_0x36d68f['p2'],_0x40c19c(0x21f),_0x28ab5d[_0x40c19c(0x239)],_0x28ab5d[_0x40c19c(0x256)])}));if(userLines['length']!==_0x3448ca['length'])return![];for(const _0x2d74d1 of userLines)if(!_0x3448ca[_0x40c19c(0x18b)](_0x545c94=>isSameLine(_0x2d74d1,_0x545c94)))return![];return!![];}function checkPointSymmetryLines(_0x96eeca){const _0x13a74f=_0x4dc7fe,_0x16a70d=[...problemLines,...userLines],_0x5f1130=_0x96eeca[_0x13a74f(0x157)];if(_0x16a70d[_0x13a74f(0x1db)]!==_0x5f1130[_0x13a74f(0x1db)])return![];const _0x16a071=[..._0x5f1130];for(const _0x1d9497 of _0x16a70d){const _0x52d043=_0x16a071['findIndex'](_0x2f7519=>isSameLine(_0x1d9497,_0x2f7519));if(_0x52d043===-0x1)return![];_0x16a071[_0x13a74f(0x245)](_0x52d043,0x1);}return _0x16a071[_0x13a74f(0x1db)]===0x0;}function findClosestValidLinePoint(_0x27f4bc){const _0x2f413f=_0x4dc7fe,_0x117e50=[...problemVertices,...userVertices];if(problemList[_0x2f413f(0x1db)]>currentProblem&&problemList[currentProblem][_0x2f413f(0x1eb)]==='point')_0x117e50[_0x2f413f(0x161)](CENTER_POINT);let _0x4f155b=null,_0x5ee6fe=Infinity;for(const _0x449652 of _0x117e50){const _0x24af52=distSq(_0x27f4bc,_0x449652);_0x24af52<_0x5ee6fe&&(_0x5ee6fe=_0x24af52,_0x4f155b=_0x449652);}return _0x4f155b;}function setCanvasMode(_0x2a9574){const _0x1b5e14=_0x4dc7fe;canvasMode=_0x2a9574;const _0x4ca561=document['getElementById']('mode-vertex'),_0x535a34=document['getElementById']('mode-line');_0x4ca561[_0x1b5e14(0x1b5)][_0x1b5e14(0x1d1)]('mode-btn-active'),_0x535a34['classList']['remove'](_0x1b5e14(0x1ea));const _0x56cc24=userVertices['length']>=0x1||problemVertices[_0x1b5e14(0x1db)]>0x1;_0x2a9574===_0x1b5e14(0x19d)?(_0x4ca561['classList']['add'](_0x1b5e14(0x1ea)),tempLineStart=null):(_0x535a34['classList'][_0x1b5e14(0x15b)](_0x1b5e14(0x1ea)),_0x4ca561['disabled']=![]),document[_0x1b5e14(0x244)](_0x1b5e14(0x1f0))[_0x1b5e14(0x16b)]=!_0x56cc24,redrawCanvas();}function getTargetTimeForProblem(_0x4f18ea){const _0x400147=_0x4dc7fe,_0x74d014=selectedDifficulty==0x2;return _0x4f18ea[_0x400147(0x1eb)]===_0x400147(0x21f)?_0x74d014?0x14:0xa:_0x74d014?0x5a:0x3c;}function showFinalResult(){const _0xd3d5c8=_0x4dc7fe;gameMode===_0xd3d5c8(0x1d2)&&stopTimer();gameMode==='timeAttack'&&selectedDifficulty!==_0xd3d5c8(0x18c)&&(totalProblems=score[_0xd3d5c8(0x166)][_0xd3d5c8(0x1db)]);saveGameState(),showPage(_0xd3d5c8(0x159));let _0x4adc79=0x0,_0x27b602=0x0,_0x49ae9a=0x0;score['results'][_0xd3d5c8(0x179)](_0x33e904=>{_0x33e904===0x0?(_0x4adc79++,_0x49ae9a+=0x1):(_0x27b602++,_0x49ae9a+=Math['max'](0x0,0x1-_0x33e904*0.4));});const _0x3ae8a4=score[_0xd3d5c8(0x166)][_0xd3d5c8(0x1db)],_0x2b9205=_0x3ae8a4>0x0?parseFloat((_0x49ae9a/_0x3ae8a4*0x64)['toFixed'](0x1)):0x0;finalAccuracyValue=_0x2b9205;let _0x359972=0x0;const _0x5b501d=selectedDifficulty===_0xd3d5c8(0x18c);document[_0xd3d5c8(0x244)](_0xd3d5c8(0x1a9))[_0xd3d5c8(0x229)]=_0x5b501d?'ì—°ìŠµ\x20ì™„ë£Œ':_0xd3d5c8(0x1cf);const _0x9ea86f=document['querySelector'](_0xd3d5c8(0x25c)),_0x467dae=document[_0xd3d5c8(0x244)](_0xd3d5c8(0x1be));_0x5b501d?(_0x9ea86f[_0xd3d5c8(0x1ab)][_0xd3d5c8(0x254)]='none',_0x467dae[_0xd3d5c8(0x1ab)][_0xd3d5c8(0x254)]=_0xd3d5c8(0x20e)):(_0x9ea86f['style']['display']='block',_0x467dae['style']['display']=_0xd3d5c8(0x234));if(gameMode===_0xd3d5c8(0x1d2)&&!_0x5b501d){const _0x454fb4=_0x3ae8a4;document[_0xd3d5c8(0x244)](_0xd3d5c8(0x19e))[_0xd3d5c8(0x1ab)]['display']='block';if(_0x454fb4===0x0)_0x359972=0x0,document[_0xd3d5c8(0x244)](_0xd3d5c8(0x1c3))[_0xd3d5c8(0x229)]='N/A';else{const _0x3e5db2=timeLimitInMinutes*0x3c-remainingTime,_0x52366f=_0x454fb4>0x0?_0x3e5db2/_0x454fb4:0x0;let _0x2f3eec=0x0;for(let _0x27032e=0x0;_0x27032e<_0x454fb4;_0x27032e++){const _0x133b07=problemList[_0x27032e];_0x133b07[_0xd3d5c8(0x1eb)]===_0xd3d5c8(0x1c8)?selectedDifficulty==0x2?_0x2f3eec+=0x5a:_0x2f3eec+=0x3c:selectedDifficulty==0x2?_0x2f3eec+=0x14:_0x2f3eec+=0xa;}const _0x1aac46=_0x454fb4>0x0?_0x2f3eec/_0x454fb4:0x0,_0x26f109=_0x52366f>0x0?_0x1aac46/_0x52366f:0x0,_0x1f9ac2=selectedDifficulty==0x2?1.5:1.2;_0x359972=Math['round'](_0x26f109*(_0x2b9205/0x64)*0x1388*_0x1f9ac2),document[_0xd3d5c8(0x244)]('avg-time-display')[_0xd3d5c8(0x229)]=_0x52366f[_0xd3d5c8(0x1ec)](0x1);}}else{document[_0xd3d5c8(0x244)](_0xd3d5c8(0x19e))[_0xd3d5c8(0x1ab)][_0xd3d5c8(0x254)]=_0xd3d5c8(0x20e);if(!_0x5b501d){let _0x5273b0=0x1;if(selectedType===_0xd3d5c8(0x1c8))_0x5273b0=1.1;else{if(selectedType===_0xd3d5c8(0x23d))_0x5273b0=1.05;}const _0x1b35c8=selectedDifficulty==0x2?1.5:0x1;_0x359972=Math[_0xd3d5c8(0x24f)](_0x3ae8a4*_0x2b9205*_0x1b35c8*_0x5273b0);}}finalScoreValue=_0x359972,document[_0xd3d5c8(0x244)](_0xd3d5c8(0x15d))[_0xd3d5c8(0x229)]=_0x4adc79,document[_0xd3d5c8(0x244)](_0xd3d5c8(0x20c))['textContent']=_0x27b602,document['getElementById'](_0xd3d5c8(0x214))['textContent']=_0x2b9205+'%',!_0x5b501d&&(document[_0xd3d5c8(0x244)](_0xd3d5c8(0x172))[_0xd3d5c8(0x229)]=_0x359972);}function handleCanvasMouseMove(_0x5d1258){const _0x4feb12=_0x4dc7fe;if(document[_0x4feb12(0x244)](_0x4feb12(0x217))['style'][_0x4feb12(0x254)]===_0x4feb12(0x20e)){hoveredLine&&(hoveredLine=null,canvas[_0x4feb12(0x1ab)][_0x4feb12(0x185)]=_0x4feb12(0x1f7),redrawCanvas());return;}const _0x399fcf=canvas[_0x4feb12(0x1b2)](),_0x51082e=(_0x5d1258[_0x4feb12(0x250)]-_0x399fcf[_0x4feb12(0x173)])/_0x399fcf[_0x4feb12(0x1e6)],_0x353377=(_0x5d1258[_0x4feb12(0x1a5)]-_0x399fcf[_0x4feb12(0x1b3)])/_0x399fcf[_0x4feb12(0x197)],_0x441a92=_0x51082e*canvas[_0x4feb12(0x1e6)],_0x462beb=_0x353377*canvas[_0x4feb12(0x197)],_0x28e879={'x':_0x441a92/GRID_SIZE,'y':_0x462beb/GRID_SIZE};let _0x4a8f9d=null,_0x2fe964=0.25;for(const _0x1991d2 of userLines){const _0x14b47e=_0x1991d2['p1'],_0x3f2298=_0x1991d2['p2'],_0xf996b6=distSq(_0x14b47e,_0x3f2298);if(_0xf996b6===0x0)continue;let _0x3b73d1=((_0x28e879['x']-_0x14b47e['x'])*(_0x3f2298['x']-_0x14b47e['x'])+(_0x28e879['y']-_0x14b47e['y'])*(_0x3f2298['y']-_0x14b47e['y']))/_0xf996b6;if(_0x3b73d1>0.2&&_0x3b73d1<0.8){const _0x45f304={'x':_0x14b47e['x']+_0x3b73d1*(_0x3f2298['x']-_0x14b47e['x']),'y':_0x14b47e['y']+_0x3b73d1*(_0x3f2298['y']-_0x14b47e['y'])},_0x2415c3=distSq(_0x28e879,_0x45f304);_0x2415c3<_0x2fe964&&(_0x2fe964=_0x2415c3,_0x4a8f9d=_0x1991d2);}}!isSameLine(hoveredLine,_0x4a8f9d)&&(hoveredLine=_0x4a8f9d,redrawCanvas());if(hoveredLine)canvas[_0x4feb12(0x1ab)][_0x4feb12(0x185)]='pointer';else{if(canvasMode===_0x4feb12(0x21f))canvas['style'][_0x4feb12(0x185)]=_0x4feb12(0x246);else canvas[_0x4feb12(0x1ab)][_0x4feb12(0x185)]=_0x4feb12(0x193);}}function showQrPopup(){const _0x2bf975=_0x4dc7fe;document[_0x2bf975(0x244)](_0x2bf975(0x211))[_0x2bf975(0x1ab)][_0x2bf975(0x254)]=_0x2bf975(0x19f);}function closeQrPopup(){const _0x5b525c=_0x4dc7fe;document[_0x5b525c(0x244)](_0x5b525c(0x211))[_0x5b525c(0x1ab)][_0x5b525c(0x254)]=_0x5b525c(0x20e);}function showHofPopup(){const _0x4dc19b=_0x4dc7fe,_0x48f287=document[_0x4dc19b(0x244)]('hof-message'),_0x27a1fa=document['querySelector']('.hof-input-group'),_0x2f155b=document[_0x4dc19b(0x209)]('#hof-table-classic\x20tbody'),_0x7381f=document[_0x4dc19b(0x209)](_0x4dc19b(0x17b));document[_0x4dc19b(0x244)](_0x4dc19b(0x16a))[_0x4dc19b(0x1ab)][_0x4dc19b(0x254)]=_0x4dc19b(0x234),hasSubmittedScore?(_0x27a1fa[_0x4dc19b(0x1ab)][_0x4dc19b(0x254)]=_0x4dc19b(0x20e),_0x48f287[_0x4dc19b(0x229)]=_0x4dc19b(0x251),_0x48f287[_0x4dc19b(0x1ab)][_0x4dc19b(0x1a4)]=_0x4dc19b(0x21b)):(_0x27a1fa[_0x4dc19b(0x1ab)]['display']=_0x4dc19b(0x234),_0x48f287[_0x4dc19b(0x229)]='',document[_0x4dc19b(0x244)](_0x4dc19b(0x20d))[_0x4dc19b(0x23a)]='',document[_0x4dc19b(0x244)]('hof-submit-btn')[_0x4dc19b(0x16b)]=![]),_0x2f155b[_0x4dc19b(0x203)]=_0x4dc19b(0x20a),_0x7381f[_0x4dc19b(0x203)]=_0x4dc19b(0x20a),document[_0x4dc19b(0x244)](_0x4dc19b(0x238))[_0x4dc19b(0x1ab)][_0x4dc19b(0x254)]=_0x4dc19b(0x19f),fetch(webAppUrl)[_0x4dc19b(0x175)](_0x44ebc9=>_0x44ebc9[_0x4dc19b(0x1f3)]())[_0x4dc19b(0x175)](_0x99803d=>{const _0xe0b7f3=_0x4dc19b,_0x16a292=_0x99803d[_0xe0b7f3(0x21c)],_0x29d561=_0x99803d[_0xe0b7f3(0x1d0)];populateHofTable(_0x2f155b,_0x99803d['classic']||[],_0xe0b7f3(0x1a3),_0x16a292),populateHofTable(_0x7381f,_0x99803d[_0xe0b7f3(0x1d2)]||[],_0xe0b7f3(0x207),_0x29d561);})[_0x4dc19b(0x223)](_0x47925e=>{const _0x3c9e93=_0x4dc19b;_0x2f155b['innerHTML']=_0x3c9e93(0x23c),_0x7381f[_0x3c9e93(0x203)]=_0x3c9e93(0x23c),console[_0x3c9e93(0x199)](_0x3c9e93(0x1e9),_0x47925e);});}function populateHofTable(_0x2d9be8,_0x3604f8,_0x28ff5d,_0x790b71){const _0x2a616=_0x4dc7fe;_0x2d9be8['innerHTML']='';if(_0x790b71){const _0x3d47de=_0x2a616(0x1d5)+_0x790b71[_0x2a616(0x1e4)]+_0x2a616(0x182)+_0x790b71[_0x2a616(0x213)]+_0x2a616(0x17d);_0x2d9be8['innerHTML']+=_0x3d47de;}if(!_0x3604f8||_0x3604f8[_0x2a616(0x1db)]===0x0){_0x2d9be8[_0x2a616(0x203)]+='<tr><td\x20colspan=\x223\x22>ì•„ì§\x20ë“±ë¡ëœ\x20'+_0x28ff5d+_0x2a616(0x212);return;}const _0x1edd8c=_0x3604f8[_0x2a616(0x1a2)](_0x4a304c=>!(_0x790b71&&_0x4a304c[_0x2a616(0x213)]===_0x790b71[_0x2a616(0x213)]&&_0x4a304c[_0x2a616(0x1e4)]===_0x790b71[_0x2a616(0x1e4)]));let _0x426aa3=0x1,_0x16d23f=0x0,_0x520af8=null;_0x1edd8c[_0x2a616(0x179)]((_0x4e5309,_0x22b0a0)=>{const _0x3441e4=_0x2a616;if(_0x520af8!==null&&_0x4e5309[_0x3441e4(0x213)]<_0x520af8)_0x426aa3+=_0x16d23f+0x1,_0x16d23f=0x0;else _0x520af8!==null&&_0x4e5309[_0x3441e4(0x213)]===_0x520af8&&_0x16d23f++;_0x520af8=_0x4e5309[_0x3441e4(0x213)];if(_0x426aa3>0x14)return;let _0x3e7ab6='';if(_0x426aa3===0x1)_0x3e7ab6=_0x3441e4(0x17a);if(_0x426aa3===0x2)_0x3e7ab6='style=\x22color:\x20#c0c0c0;\x20font-weight:\x20bold;\x20text-shadow:\x200\x200\x203px\x20#fff;\x22';if(_0x426aa3===0x3)_0x3e7ab6='style=\x22color:\x20#cd7f32;\x20font-weight:\x20bold;\x20text-shadow:\x200\x200\x203px\x20#fff;\x22';const _0x2cd371=_0x3441e4(0x17c)+_0x426aa3+'</td><td\x20'+_0x3e7ab6+'>'+_0x4e5309[_0x3441e4(0x1e4)]+'\x20'+(_0x426aa3===0x1?'ğŸ¥‡':_0x426aa3===0x2?'ğŸ¥ˆ':_0x426aa3===0x3?'ğŸ¥‰':'')+'</td><td>'+_0x4e5309[_0x3441e4(0x213)]+_0x3441e4(0x1cb);_0x2d9be8[_0x3441e4(0x203)]+=_0x2cd371;});}function closeHofPopup(){const _0x49a81b=_0x4dc7fe;document[_0x49a81b(0x244)](_0x49a81b(0x238))[_0x49a81b(0x1ab)]['display']='none';}function saveGameState(){const _0x3d78b6=_0x4dc7fe;if(document['getElementById'](_0x3d78b6(0x1d6))[_0x3d78b6(0x1ab)]['display']===_0x3d78b6(0x234)&&problemList[_0x3d78b6(0x1db)]===0x0)return;const _0x1cd460={'problemList':problemList,'currentProblem':currentProblem,'score':score,'userVertices':userVertices,'userLines':userLines,'canvasMode':canvasMode,'selectedType':selectedType,'selectedDifficulty':selectedDifficulty,'totalProblems':totalProblems,'currentProblemAttempts':currentProblemAttempts,'finalScoreValue':finalScoreValue,'hasSubmittedScore':hasSubmittedScore,'gameMode':gameMode,'timeLimitInMinutes':timeLimitInMinutes,'remainingTime':remainingTime};localStorage[_0x3d78b6(0x1c9)](_0x3d78b6(0x15f),JSON[_0x3d78b6(0x1f2)](_0x1cd460));}function loadGameState(){const _0x45b734=_0x4dc7fe,_0x3f66da=localStorage[_0x45b734(0x181)](_0x45b734(0x15f));if(!_0x3f66da)return'none';const _0x14dbb0=JSON[_0x45b734(0x165)](_0x3f66da);if(!_0x14dbb0||!_0x14dbb0['problemList']||!_0x14dbb0['score']||!_0x14dbb0[_0x45b734(0x226)])return _0x45b734(0x20e);const _0x3aec22=_0x14dbb0[_0x45b734(0x226)]===_0x45b734(0x15e)&&_0x14dbb0[_0x45b734(0x24d)]>0x0&&_0x14dbb0[_0x45b734(0x1dd)]<_0x14dbb0[_0x45b734(0x24d)],_0x27d707=_0x14dbb0['gameMode']==='timeAttack'&&_0x14dbb0[_0x45b734(0x25a)]>0x0;if(_0x3aec22||_0x27d707)return problemList=_0x14dbb0[_0x45b734(0x189)],currentProblem=_0x14dbb0[_0x45b734(0x1dd)],score=_0x14dbb0['score'],canvasMode=_0x14dbb0[_0x45b734(0x1e1)],selectedType=_0x14dbb0[_0x45b734(0x216)],selectedDifficulty=_0x14dbb0[_0x45b734(0x206)],totalProblems=_0x14dbb0[_0x45b734(0x24d)],currentProblemAttempts=_0x14dbb0[_0x45b734(0x255)],finalScoreValue=_0x14dbb0['finalScoreValue'],hasSubmittedScore=_0x14dbb0['hasSubmittedScore'],gameMode=_0x14dbb0[_0x45b734(0x226)],timeLimitInMinutes=_0x14dbb0[_0x45b734(0x228)],remainingTime=_0x14dbb0['remainingTime'],userVertices=_0x14dbb0[_0x45b734(0x1ae)]||[],userLines=_0x14dbb0[_0x45b734(0x232)]||[],gameMode===_0x45b734(0x1d2)&&remainingTime>0x0&&startTimer(!![]),_0x45b734(0x1a6);const _0x555e52=_0x14dbb0[_0x45b734(0x213)][_0x45b734(0x166)][_0x45b734(0x1db)]>0x0||_0x14dbb0['gameMode']===_0x45b734(0x1d2)&&_0x14dbb0[_0x45b734(0x25a)]<=0x0;if(_0x555e52)return Object['assign'](window,_0x14dbb0),_0x45b734(0x1bc);return'none';}function clearGameState(){const _0x4be1ab=_0x4dc7fe;localStorage[_0x4be1ab(0x180)]('quizState');}function _0xb6fd(){const _0x3a3be1=['.score-display','allLines','timer-display','final-result-page','className','add','.problem-dot','correct-count','classic','quizState','#ff0000','push','ì‹œê°„ì€\x202ë¶„ìœ¼ë¡œ<br>ê³ ì •ë©ë‹ˆë‹¤.','1119580hAsaVW','ë¬¸ì œ\x20ê°œìˆ˜ëŠ”<br>3ê°œë¡œ\x20ê³ ì •ë©ë‹ˆë‹¤.','parse','results','ë²ˆì§¸\x20ë¬¸ì œ\x20(','time-attack-settings','reduce','hof-reset-message','disabled','time-minus','798QaQwMt','innerWidth','result-popup-overlay','slanted','restart-btn','final-score','left','application/json','then','findIndex','42411zHVmtm','#difficulty-select\x20button[data-difficulty=\x221\x22]','forEach','style=\x22color:\x20#d4af37;\x20font-weight:\x20bold;\x20text-shadow:\x200\x200\x204px\x20#fff,\x200\x200\x206px\x20#ff0;\x22','#hof-table-timeattack\x20tbody','<tr><td>','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>','time-warning','incorrect','removeItem','getItem','\x20ğŸ†</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','horizontal','querySelectorAll','cursor','ì…ë‹ˆë‹¤.<br>ë‚˜ë¨¸ì§€\x20ë¶€ë¶„ì„\x20ì™„ì„±í•´\x20ì£¼ì„¸ìš”.','next-problem-btn','restore','problemList','stroke','some','practice','beginPath','initialLines','705447RvPCPX','ì§„í–‰\x20ìƒí™©ì´\x20ì‚¬ë¼ì§‘ë‹ˆë‹¤.\x20ì •ë§ë¡œ\x20ì²«\x20í˜ì´ì§€ë¡œ\x20ëŒì•„ê°ˆê¹Œìš”?','settings-overlay','ê¼­ì§“ì ì˜\x20ìœ„ì¹˜ë‚˜\x20ê°œìˆ˜ê°€\x20ì˜ëª»ë˜ì—ˆì–´ìš”.','crosshair','data-difficulty','toString','rgba(234,\x20153,\x20153,\x200.5)','height','touchstart','error','ì ëŒ€ì¹­','mode-selection-page','start-quiz-btn','vertex','time-attack-avg-time','flex','mouseleave','shadowColor','filter','í´ë˜ì‹','color','clientY','in-progress','2110ugsCVv','createElement','final-result-title','transform','style','ceil','submitScore','userVertices','transition','qr-code-btn','classic-settings','getBoundingClientRect','top','problem-dot','classList','POST','popup-main-message','transform\x200.2s\x20ease-out','has','52fkHKhs','moveTo','finished','Error\x20submitting\x20score:','show-hof-btn','284192obmNin','quantity-minus','random','924341dhbjjC','avg-time-display','grid-canvas','ì„ ëŒ€ì¹­','setLineDash','ë³µêµ¬\x20ì¤‘\x20ì¶”ê°€\x20ì˜¤ë¥˜\x20ë°œìƒ:','point','setItem','initialVertices','</td></tr>','classic-mode-btn','ì´ë‹ˆì…œì€\x20ì˜ì–´\x20ëŒ€ë¬¸ì\x203ê¸€ìë¡œ\x20ì…ë ¥í•´ì£¼ì„¸ìš”.','problem-instruction','í•™ìŠµ\x20ì™„ë£Œ','timeAttackTopScorer','remove','timeAttack','back-to-mode-select-btn','reload','<tr\x20style=\x22font-weight:\x20bold;\x20color:\x20#4b8134;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>â­</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','problem-page','#type-select\x20button[data-type=\x22line\x22]','time-plus','indexOf','map','length','lineTo','currentProblem','div','sqrt','translateX(-100%)','canvasMode','26TzaAyo','#problem-page\x20.home-button','initial','ì¹˜ëª…ì ì¸\x20ì˜¤ë¥˜ê°€\x20ë°œìƒí•˜ì—¬\x20í˜ì´ì§€ë¥¼\x20ìƒˆë¡œê³ ì¹¨í•©ë‹ˆë‹¤.','width','ë“±ë¡ì—\x20ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\x20ë‹¤ì‹œ\x20ì‹œë„í•´ì£¼ì„¸ìš”.','transform\x20','Error\x20fetching\x20leaderboard:','mode-btn-active','type','toFixed','visibilitychange','reverse','setup-page','mode-line','<br><span\x20style=\x22font-size:\x2080%;\x22>','stringify','json','click','#difficulty-select\x20button','hof-message','default','floor','ì •ë‹µì…ë‹ˆë‹¤ğŸ‰','.canvas-wrapper','rgba(234,\x20153,\x20153,\x200.7)','ì˜¤ë¥˜ê°€\x20ë°œìƒí•˜ì—¬\x20ì•±ì„\x20ì´ˆê¸°í™”í•©ë‹ˆë‹¤:','fillStyle','clear-canvas-btn','</span>','#28a745','confirm-clear-popup-overlay','data-type','innerHTML','ë„í˜•ì´\x20ëŒ€ì¹­ì„\x20ì´ë£¨ì§€\x20ì•Šê±°ë‚˜\x20ë¹ ëœ¨ë¦°\x20ì„ ë¶„ì´\x20ìˆì–´ìš”.','#333','selectedDifficulty','íƒ€ì„ì–´íƒ','fill','querySelector','<tr><td\x20colspan=\x223\x22>ë¶ˆëŸ¬ì˜¤ëŠ”\x20ì¤‘...</td></tr>','problem-quantity','retried-count','hof-initial','none','ë‚¨ì€\x20ë¬¸ì œ\x20','mousedown','qr-popup-overlay','\x20ê¸°ë¡ì´\x20ì—†ìŠµë‹ˆë‹¤.</td></tr>','score','final-accuracy','shadowBlur','selectedType','check-answer-btn','onload','quantity-plus','touchend','blue','classicTopScorer','abs','padStart','line','popup-next-btn','currentTarget','selected','catch','confirm-clear-no-btn','lineWidth','gameMode','ë‹¤ì‹œ\x20ìƒê°í•´\x20ë³¼ê¹Œìš”?','timeLimitInMinutes','textContent','toggle','set','includes','20RNbmVR','getAttribute','ê¼­ì§“ì ì´ë‚˜\x20ì„ ë¶„\x20ì—°ê²°ì—\x20ì˜¤ë¥˜ê°€\x20ìˆì–´\x20ëŒ€ì¹­ë„í˜•ì´\x20ì™„ì„±ë˜ì§€\x20ì•Šì•˜ìŠµë‹ˆë‹¤.','addEventListener','red','userLines','arc','block','ì„±ê³µì ìœ¼ë¡œ\x20ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!','time-attack-mode-btn','pagehide','hof-popup-overlay','isSlantedAxis','value','line-dot','<tr><td\x20colspan=\x223\x22>ê¸°ë¡ì„\x20ë¶ˆëŸ¬ì˜¤ëŠ”\x20ë°\x20ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.</td></tr>','both','13722mYYcyF','strokeStyle','user-dot','#4B8134','hof-submit-btn','problem-counter-display','getElementById','splice','pointer','appendChild','sort','cos','mouseup','ì ëŒ€ì¹­ë„í˜•','ë²ˆì§¸\x20ë¬¸ì œ<br>(','totalProblems','find','round','clientX','ì´ë²ˆ\x20í•™ìŠµ\x20ê¸°ë¡ì€\x20ì´ë¯¸\x20ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.','concat','#type-select\x20button','display','currentProblemAttempts','axisDirection','vertical','selected-line-dot','íƒ€ì¸ì—ê²Œ\x20ë¶ˆì¾Œê°ì„\x20ì£¼ëŠ”\x20ë‹¨ì–´ëŠ”\x20ì‚¬ìš©í• \x20ìˆ˜\x20ì—†ìŠµë‹ˆë‹¤.','remainingTime','atan2'];_0xb6fd=function(){return _0x3a3be1;};return _0xb6fd();}function submitScore(){const _0xe6dbb2=_0x4dc7fe,_0x64163e=document[_0xe6dbb2(0x244)](_0xe6dbb2(0x20d)),_0x48be1a=_0x64163e['value'],_0x475595=document[_0xe6dbb2(0x244)](_0xe6dbb2(0x242)),_0x208c24=document['getElementById'](_0xe6dbb2(0x1f6));if(!/^[A-Z]{3}$/['test'](_0x48be1a)){_0x208c24[_0xe6dbb2(0x229)]=_0xe6dbb2(0x1cd),_0x208c24[_0xe6dbb2(0x1ab)][_0xe6dbb2(0x1a4)]='red';return;}if(blockedWords[_0xe6dbb2(0x22c)](_0x48be1a)){_0x208c24[_0xe6dbb2(0x229)]=_0xe6dbb2(0x259),_0x208c24[_0xe6dbb2(0x1ab)]['color']='red';return;}_0x475595[_0xe6dbb2(0x16b)]=!![],_0x208c24[_0xe6dbb2(0x229)]='ë“±ë¡\x20ì¤‘...',_0x208c24[_0xe6dbb2(0x1ab)]['color']=_0xe6dbb2(0x205);const _0x5d45b1={'action':_0xe6dbb2(0x1ad),'initial':_0x48be1a,'score':finalScoreValue,'problems':problemList[_0xe6dbb2(0x1db)],'accuracy':finalAccuracyValue,'difficulty':selectedDifficulty,'type':selectedType,'mode':gameMode};fetch(webAppUrl,{'method':_0xe6dbb2(0x1b6),'cache':'no-cache','headers':{'Content-Type':_0xe6dbb2(0x174)},'body':JSON[_0xe6dbb2(0x1f2)](_0x5d45b1)})[_0xe6dbb2(0x175)](_0x2a04bd=>_0x2a04bd['json']())[_0xe6dbb2(0x175)](_0xb4bedc=>{const _0x51f3bb=_0xe6dbb2;if(_0xb4bedc['result']==='success')hasSubmittedScore=!![],saveGameState(),_0x208c24[_0x51f3bb(0x229)]=_0x51f3bb(0x235),_0x208c24['style'][_0x51f3bb(0x1a4)]=_0x51f3bb(0x241),document['querySelector']('.hof-input-group')[_0x51f3bb(0x1ab)][_0x51f3bb(0x254)]='none',setTimeout(showHofPopup,0x5dc);else throw new Error(_0xb4bedc['message']||'ì•Œ\x20ìˆ˜\x20ì—†ëŠ”\x20ì˜¤ë¥˜');})[_0xe6dbb2(0x223)](_0x30be0e=>{const _0x46e753=_0xe6dbb2;_0x208c24[_0x46e753(0x229)]=_0x46e753(0x1e7),_0x208c24[_0x46e753(0x1ab)]['color']=_0x46e753(0x231),_0x475595[_0x46e753(0x16b)]=![],console[_0x46e753(0x199)](_0x46e753(0x1bd),_0x30be0e);});}function startTimer(_0x488519=![]){const _0x32dd18=_0x4dc7fe;stopTimer();if(!_0x488519)remainingTime=timeLimitInMinutes*0x3c;const _0x43652e=document[_0x32dd18(0x244)](_0x32dd18(0x158));_0x43652e[_0x32dd18(0x1ab)][_0x32dd18(0x254)]=_0x32dd18(0x234),updateTimerDisplay(),timerInterval=setInterval(()=>{remainingTime--,updateTimerDisplay(),remainingTime<=0x0&&(stopTimer(),showFinalResult());},0x3e8);}function stopTimer(){clearInterval(timerInterval),timerInterval=null;}function updateTimerDisplay(){const _0x1313bf=_0x4dc7fe,_0x2a5f16=document['getElementById'](_0x1313bf(0x158));if(remainingTime<0x0)remainingTime=0x0;const _0x376d3b=Math[_0x1313bf(0x1f8)](remainingTime/0x3c),_0x1cd4a9=remainingTime%0x3c;_0x2a5f16[_0x1313bf(0x229)]=_0x376d3b+':'+_0x1cd4a9[_0x1313bf(0x195)]()[_0x1313bf(0x21e)](0x2,'0'),_0x2a5f16['classList'][_0x1313bf(0x22a)](_0x1313bf(0x17e),remainingTime<=0x3c&&remainingTime>0x0);}window[_0x4dc7fe(0x218)]=()=>{const _0x4b1462=_0x4dc7fe;try{setupGrid();const _0x19d809=loadGameState();if(_0x19d809===_0x4b1462(0x1bc))showFinalResult();else _0x19d809===_0x4b1462(0x1a6)?(showPage('problem-page'),loadProblem()):(resetGame(),showPage('mode-selection-page'));initializeSetupListeners(),document[_0x4b1462(0x244)](_0x4b1462(0x1cc))['addEventListener'](_0x4b1462(0x1f4),()=>selectGameMode('classic')),document[_0x4b1462(0x244)](_0x4b1462(0x236))[_0x4b1462(0x230)](_0x4b1462(0x1f4),()=>selectGameMode(_0x4b1462(0x1d2))),document[_0x4b1462(0x244)](_0x4b1462(0x1d3))[_0x4b1462(0x230)]('click',()=>{confirm('ì§„í–‰\x20ìƒí™©ì´\x20ì‚¬ë¼ì§‘ë‹ˆë‹¤.\x20ì •ë§ë¡œ\x20ì²«\x20í˜ì´ì§€ë¡œ\x20ëŒì•„ê°ˆê¹Œìš”?')&&(resetGame(),showPage('mode-selection-page'));}),canvas[_0x4b1462(0x230)]('mousemove',handleCanvasMouseMove),canvas['addEventListener']('mouseleave',()=>{hoveredLine&&(hoveredLine=null,redrawCanvas());}),canvas[_0x4b1462(0x230)](_0x4b1462(0x1f4),_0x3a899b=>{const _0x30419e=_0x4b1462;if(document[_0x30419e(0x244)]('check-answer-btn')['style'][_0x30419e(0x254)]===_0x30419e(0x20e))return;if(hoveredLine){userLines=userLines[_0x30419e(0x1a2)](_0x2175e2=>!isSameLine(_0x2175e2,hoveredLine)),hoveredLine=null,handleCanvasMouseMove(_0x3a899b),redrawCanvas(),saveGameState();return;}const _0x295e18=canvas[_0x30419e(0x1b2)](),_0x3590b2=(_0x3a899b[_0x30419e(0x250)]-_0x295e18[_0x30419e(0x173)])/_0x295e18[_0x30419e(0x1e6)],_0x66e7d2=(_0x3a899b[_0x30419e(0x1a5)]-_0x295e18[_0x30419e(0x1b3)])/_0x295e18['height'],_0x40475b=Math[_0x30419e(0x24f)](_0x3590b2*canvas['width']/GRID_SIZE),_0x456108=Math[_0x30419e(0x24f)](_0x66e7d2*canvas[_0x30419e(0x197)]/GRID_SIZE);if(_0x40475b<0x0||_0x40475b>GRID_COUNT||_0x456108<0x0||_0x456108>GRID_COUNT)return;const _0x2d9dcf={'x':_0x40475b,'y':_0x456108};if(canvasMode===_0x30419e(0x19d)){if(isVertexOnProblemBoundary(_0x2d9dcf))return;const _0x130943=userVertices[_0x30419e(0x176)](_0x988717=>isSamePoint(_0x988717,_0x2d9dcf));_0x130943>-0x1?(userVertices['splice'](_0x130943,0x1),userLines=userLines['filter'](_0x53eb20=>!(isSamePoint(_0x53eb20['p1'],_0x2d9dcf)||isSamePoint(_0x53eb20['p2'],_0x2d9dcf)))):userVertices['push'](_0x2d9dcf),redrawCanvas(),saveGameState();}else{if(canvasMode===_0x30419e(0x21f)){const _0x30b8d4=findClosestValidLinePoint(_0x2d9dcf);if(!_0x30b8d4)return;if(!tempLineStart)tempLineStart=_0x30b8d4;else{if(!isSamePoint(tempLineStart,_0x30b8d4)){const _0x5f2f82={'p1':tempLineStart,'p2':_0x30b8d4};if(!isLineExists(_0x5f2f82))userLines['push'](_0x5f2f82);else userLines=userLines[_0x30419e(0x1a2)](_0xda7b2f=>!isSameLine(_0xda7b2f,_0x5f2f82));}tempLineStart=null;}redrawCanvas(),saveGameState();}}}),document[_0x4b1462(0x244)](_0x4b1462(0x19c))[_0x4b1462(0x230)]('click',startQuiz),document[_0x4b1462(0x244)](_0x4b1462(0x187))[_0x4b1462(0x230)](_0x4b1462(0x1f4),nextProblem),document[_0x4b1462(0x244)](_0x4b1462(0x1fe))[_0x4b1462(0x230)](_0x4b1462(0x1f4),()=>{const _0x5e1b27=_0x4b1462;document[_0x5e1b27(0x244)](_0x5e1b27(0x201))[_0x5e1b27(0x1ab)][_0x5e1b27(0x254)]=_0x5e1b27(0x19f);}),document['querySelector'](_0x4b1462(0x1e3))[_0x4b1462(0x230)]('click',()=>{const _0xcf4568=_0x4b1462;confirm(_0xcf4568(0x190))&&(resetGame(),showPage(_0xcf4568(0x19b)));}),document[_0x4b1462(0x244)](_0x4b1462(0x1b0))['addEventListener'](_0x4b1462(0x1f4),showQrPopup),document['getElementById']('show-hof-btn')[_0x4b1462(0x230)]('click',showHofPopup),document[_0x4b1462(0x244)](_0x4b1462(0x242))['addEventListener'](_0x4b1462(0x1f4),submitScore),document['getElementById']('confirm-clear-yes-btn')[_0x4b1462(0x230)](_0x4b1462(0x1f4),()=>{const _0x4be33e=_0x4b1462;clearCanvas(!![]),saveGameState(),document[_0x4be33e(0x244)](_0x4be33e(0x201))[_0x4be33e(0x1ab)][_0x4be33e(0x254)]=_0x4be33e(0x20e);}),document[_0x4b1462(0x244)](_0x4b1462(0x224))[_0x4b1462(0x230)](_0x4b1462(0x1f4),()=>{const _0x32b7f0=_0x4b1462;document['getElementById'](_0x32b7f0(0x201))[_0x32b7f0(0x1ab)][_0x32b7f0(0x254)]=_0x32b7f0(0x20e);}),document[_0x4b1462(0x244)](_0x4b1462(0x171))[_0x4b1462(0x230)](_0x4b1462(0x1f4),()=>{const _0x587bf8=_0x4b1462;resetGame(),showPage(_0x587bf8(0x19b));});const _0x2c39e5=()=>{const _0x3c746d=_0x4b1462;if(isExitingIntentionally)return;if(document[_0x3c746d(0x244)](_0x3c746d(0x1d6))['style'][_0x3c746d(0x254)]==='block')saveGameState();};window['addEventListener'](_0x4b1462(0x237),_0x2c39e5),window[_0x4b1462(0x230)](_0x4b1462(0x1ed),()=>{if(document['visibilityState']==='hidden')_0x2c39e5();});const _0x18fd88=document['getElementById'](_0x4b1462(0x217)),_0x49ff37=_0x18fd88[_0x4b1462(0x209)]('.progress-bar');let _0x470be9=null,_0xeef756=![];const _0x1341f0=0x190,_0x34b8ec=_0x4950c6=>{const _0x1eee23=_0x4b1462;if(_0x4950c6['type']===_0x1eee23(0x210)&&_0x4950c6['button']!==0x0)return;_0x4950c6['preventDefault']();if(_0xeef756)return;_0xeef756=!![],_0x49ff37['style'][_0x1eee23(0x1af)]=_0x1eee23(0x1e8)+_0x1341f0/0x3e8+'s\x20linear',_0x49ff37[_0x1eee23(0x1ab)][_0x1eee23(0x1aa)]='translateX(0%)',_0x470be9=setTimeout(()=>{if(!_0xeef756)return;const _0xdf33b6=checkAnswer();!_0xdf33b6&&_0x2c76db();},_0x1341f0);},_0x2c76db=()=>{const _0x3cef87=_0x4b1462;if(!_0xeef756)return;_0xeef756=![],clearTimeout(_0x470be9),_0x470be9=null,_0x49ff37[_0x3cef87(0x1ab)][_0x3cef87(0x1af)]=_0x3cef87(0x1b8),_0x49ff37[_0x3cef87(0x1ab)][_0x3cef87(0x1aa)]=_0x3cef87(0x1e0);};_0x18fd88[_0x4b1462(0x230)](_0x4b1462(0x210),_0x34b8ec),_0x18fd88[_0x4b1462(0x230)](_0x4b1462(0x198),_0x34b8ec,{'passive':![]}),_0x18fd88[_0x4b1462(0x230)](_0x4b1462(0x24a),_0x2c76db),_0x18fd88[_0x4b1462(0x230)](_0x4b1462(0x1a0),_0x2c76db),_0x18fd88[_0x4b1462(0x230)](_0x4b1462(0x21a),_0x2c76db);}catch(_0x1707d6){console[_0x4b1462(0x199)](_0x4b1462(0x1fc),_0x1707d6),clearGameState();try{resetGame(),showPage(_0x4b1462(0x19b)),initializeSetupListeners(),document[_0x4b1462(0x244)](_0x4b1462(0x1cc))['addEventListener']('click',()=>selectGameMode(_0x4b1462(0x15e))),document[_0x4b1462(0x244)]('time-attack-mode-btn')[_0x4b1462(0x230)](_0x4b1462(0x1f4),()=>selectGameMode('timeAttack'));}catch(_0xb8bfee){console[_0x4b1462(0x199)](_0x4b1462(0x1c7),_0xb8bfee),alert(_0x4b1462(0x1e5)),location[_0x4b1462(0x1d4)]();}}};</script>

</body>
</html>
